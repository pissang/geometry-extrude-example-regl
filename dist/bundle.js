!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,u,s,c,f,h,m,b=t&&t.length,v=b?t[0]*n:e.length,g=i(e,0,v,n,!0),y=[];if(!g)return y;if(b&&(g=function(e,t,n,r){var a,u,s,c,f,h=[];for(a=0,u=t.length;a<u;a++)s=t[a]*r,c=a<u-1?t[a+1]*r:e.length,(f=i(e,s,c,r,!1))===f.next&&(f.steiner=!0),h.push(p(f));for(h.sort(l),a=0;a<h.length;a++)d(h[a],n),n=o(n,n.next);return n}(e,t,g,n)),e.length>80*n){r=s=e[0],u=c=e[1];for(var _=n;_<v;_+=n)f=e[_],h=e[_+1],f<r&&(r=f),h<u&&(u=h),f>s&&(s=f),h>c&&(c=h);m=0!==(m=Math.max(s-r,c-u))?1/m:0}return a(g,y,n,r,u,m),y}function i(e,t,n,r,i){var o,a;if(i===k(e,t,n,r)>0)for(o=t;o<n;o+=r)a=w(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=w(o,e[o],e[o+1],a);return a&&g(a,a.next)&&(M(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(M(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,l,d){if(e){!d&&l&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=h(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,u,s,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,u=0,t=0;t<c&&(u++,r=r.nextZ);t++);for(s=c;u>0||s>0&&r;)0!==u&&(0===s||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,l);for(var p,m,b=e;e.prev!==e.next;)if(p=e.prev,m=e.next,l?s(e,r,i,l):u(e))t.push(p.i/n),t.push(e.i/n),t.push(m.i/n),M(e),e=m.next,b=m.next;else if((e=m)===b){d?1===d?a(e=c(e,t,n),t,n,r,i,l,2):2===d&&f(e,t,n,r,i,l):a(o(e),t,n,r,i,l,1);break}}}function u(e){var t=e.prev,n=e,r=e.next;if(v(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(m(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&v(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(e,t,n,r){var i=e.prev,o=e,a=e.next;if(v(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,s=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,f=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=h(u,s,t,n,r),d=h(c,f,t,n,r),p=e.prevZ,b=e.nextZ;p&&p.z>=l&&b&&b.z<=d;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,b!==e.prev&&b!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;p&&p.z>=l;){if(p!==e.prev&&p!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;b&&b.z<=d;){if(b!==e.prev&&b!==e.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!g(i,o)&&y(i,r,r.next,o)&&_(i,o)&&_(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),M(r),M(r.next),r=e=o),r=r.next}while(r!==e);return r}function f(e,t,n,r,i,u){var s=e;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&b(s,c)){var f=x(s,c);return s=o(s,s.next),f=o(f,f.next),a(s,t,n,r,i,u),void a(f,t,n,r,i,u)}c=c.next}s=s.next}while(s!==e)}function l(e,t){return e.x-t.x}function d(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>a){if(a=u,u===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var s,c=n,f=n.x,l=n.y,d=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=f&&i!==r.x&&m(o<l?i:a,o,f,l,o<l?a:i,o,r.x,r.y)&&((s=Math.abs(o-r.y)/(i-r.x))<d||s===d&&r.x>n.x)&&_(r,e)&&(n=r,d=s),r=r.next;return n}(e,t)){var n=x(t,e);o(n,n.next)}}function h(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function m(e,t,n,r,i,o,a,u){return(i-a)*(t-u)-(e-a)*(o-u)>=0&&(e-a)*(r-u)-(n-a)*(t-u)>=0&&(n-a)*(o-u)-(i-a)*(r-u)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&_(e,t)&&_(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function v(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){return!!(g(e,t)&&g(n,r)||g(e,r)&&g(n,t))||v(e,t,n)>0!=v(e,t,r)>0&&v(n,r,e)>0!=v(n,r,t)>0}function _(e,t){return v(e.prev,e,e.next)<0?v(e,t,e.next)>=0&&v(e,e.prev,t)>=0:v(e,t,e.prev)<0||v(e,e.next,t)<0}function x(e,t){var n=new A(e.i,e.x,e.y),r=new A(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(e,t,n,r){var i=new A(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(k(e,0,o,n));if(i)for(var u=0,s=t.length;u<s;u++){var c=t[u]*n,f=u<s-1?t[u+1]*n:e.length;a-=Math.abs(k(e,c,f,n))}var l=0;for(u=0;u<r.length;u+=3){var d=r[u]*n,h=r[u+1]*n,p=r[u+2]*n;l+=Math.abs((e[d]-e[p])*(e[h+1]-e[d+1])-(e[d]-e[h])*(e[p+1]-e[d+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,u,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(i(n))for(u=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,s=0;s<a;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(u=a;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){e.exports={create:n(35),clone:n(34),copy:n(33),identity:n(3),transpose:n(32),invert:n(31),adjoint:n(30),determinant:n(29),multiply:n(28),translate:n(27),scale:n(26),rotate:n(25),rotateX:n(24),rotateY:n(23),rotateZ:n(22),fromRotation:n(21),fromRotationTranslation:n(20),fromScaling:n(19),fromTranslation:n(18),fromXRotation:n(17),fromYRotation:n(16),fromZRotation:n(15),fromQuat:n(14),frustum:n(13),perspective:n(12),perspectiveFromFieldOfView:n(11),ortho:n(10),lookAt:n(9),str:n(8)}},function(e,t){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t,n){var r=n(43),i=n(42),o=n(40),a=n(39),u=n(38),s=1;e.exports=function(e,t){(t=t||{}).pan=!1!==t.pan,t.scale=!1!==t.scale,t.rotate=!1!==t.rotate;var n=i(e,t.scale),c=a(e,t.rotate),f=o(e),l=r([0,10,30],[0,0,0],[0,1,0]);return l.tick=function(){var r=u("<control>")||u("<alt>"),i=u("<shift>"),o=e.height,a=e.width;if(t.rotate&&c.left&&!r&&!i&&l.rotate([f.x/a-.5,f.y/o-.5],[f.prevX/a-.5,f.prevY/o-.5]),(t.pan&&c.right||c.left&&r&&!i)&&l.pan([s*(f.x-f.prevX)/a,s*(f.y-f.prevY)/o]),t.scale&&n[1]&&(l.distance*=Math.exp(n[1]/o)),t.scale&&(c.middle||c.left&&!r&&i)){var d=f.y-f.prevY;if(!d)return;l.distance*=Math.exp(d/o)}n.flush(),f.flush()},l}},function(e,t,n){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){var t=new Error("(regl) "+e);throw console.error(t),t}function i(e,t){e||r(t)}function o(e){return e?": "+e:""}function a(e,t,n){t.indexOf(e)<0&&r("invalid value"+o(n)+". must be one of: "+t)}var u=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function s(e,t){for(e+="";e.length<t;)e=" "+e;return e}function c(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(e,t){this.number=e,this.line=t,this.errors=[]}function l(e,t,n){this.file=e,this.line=t,this.message=n}function d(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function h(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function p(e,t){var n,r=e.split("\n"),i=1,o=0,a={unknown:new c,0:new c};a.unknown.name=a[0].name=t||d(),a.unknown.lines.push(new f(0,""));for(var u=0;u<r.length;++u){var s=r[u],l=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(s);if(l)switch(l[1]){case"line":var h=/(\d+)(\s+\d+)?/.exec(l[2]);h&&(i=0|h[1],h[2]&&((o=0|h[2])in a||(a[o]=new c)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[o].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[o].lines.push(new f(i++,s))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function m(e){e._commandRef=d()}function b(e,t){var n=h();r(e+" in command "+(t||d())+("unknown"===n?"":" called from "+n))}function v(e,t,n,r){typeof e!==t&&b("invalid parameter type"+o(n)+". expected "+t+", got "+typeof e,r||d())}var g=33071,y=9728,_=9984,x=9985,w=9986,M=9987,A=5126,k=32819,E=32820,S=33635,C=34042,T={};function O(e,t){return e===E||e===k||e===S?2:e===C?4:T[e]*t}function D(e){return!(e&e-1||!e)}T[5120]=T[5121]=1,T[5122]=T[5123]=T[36193]=T[S]=T[k]=T[E]=2,T[5124]=T[5125]=T[A]=T[C]=4;var j=t(i,{optional:function(e){e()},raise:r,commandRaise:b,command:function(e,t,n){e||b(t,n||d())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||b("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join(),r||d())},constructor:function(e){Object.keys(e).forEach(function(e){u.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+u)})},type:function(e,t,n){typeof e!==t&&r("invalid parameter type"+o(n)+". expected "+t+", got "+typeof e)},commandType:v,isTypedArray:function(t,n){e(t)||r("invalid parameter type"+o(n)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||r("invalid parameter type, ("+e+")"+o(t)+". must be a nonnegative integer")},oneOf:a,shaderError:function(e,t,r,o,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(t),c=o===e.FRAGMENT_SHADER?"fragment":"vertex";v(r,"string",c+" shader source must be a string",a);var f=p(r,a),d=function(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);n?t.push(new l(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new l("unknown",0,e))}}),t}(u);!function(e,t){t.forEach(function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}(f,d),Object.keys(f).forEach(function(e){var t=f[e];if(t.hasErrors){var r=[""],i=[""];o("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach(function(e){if(e.errors.length>0){o(s(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach(function(r){var i=r.message,a=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(a){var u=a[1];switch(i=a[2],u){case"assign":u="="}t=Math.max(e.line.indexOf(u,t),0)}else t=0;o(s("| ",6)),o(s("^^^",t+3)+n,"font-weight:bold"),o(s("| ",6)),o(i+n,"font-weight:bold")}),o(s("| ",6)+n)}else o(s(e.number,4)+"|  "),o(e.line+n,"color:red")}),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(e,t){r.push(e),i.push(t||"")}}),i.raise("Error compiling "+c+" shader, "+f[0].name)}},linkError:function(e,t,r,o,a){if(!e.getProgramParameter(t,e.LINK_STATUS)){var u=e.getProgramInfoLog(t),s=p(r,a),c=p(o,a),f='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!=typeof document?console.log("%c"+f+n+"%c"+u,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+n+u),i.raise(f)}},callSite:h,saveCommandRef:m,saveDrawInfo:function(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach(function(t){e[r.id(t)]=!0})}m(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var u=e._attributeSet={};o(u,n.static),o(u,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?a(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):a(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(e,t,n){var r,o=t.width,a=t.height,u=t.channels;i(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),(e.wrapS!==g||e.wrapT!==g)&&i(D(o)&&D(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==o&&1!==a&&i(e.minFilter!==_&&e.minFilter!==w&&e.minFilter!==x&&e.minFilter!==M,"min filter requires mipmap"):(i(D(o)&&D(a),"texture must be a square power of 2 to support mipmapping"),i(t.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),t.type===A&&(n.extensions.indexOf("oes_texture_float_linear")<0&&i(e.minFilter===y&&e.magFilter===y,"filter not supported, must enable oes_texture_float_linear"),i(!e.genMipmaps,"mipmap generation not supported with float textures"));var s=t.images;for(r=0;r<16;++r)if(s[r]){var c=o>>r,f=a>>r;i(t.mipmask&1<<r,"missing mipmap data");var l=s[r];if(i(l.width===c&&l.height===f,"invalid shape for mip images"),i(l.format===t.format&&l.internalformat===t.internalformat&&l.type===t.type,"incompatible type for mip image"),l.compressed);else if(l.data){var d=Math.ceil(O(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;i(l.data.byteLength===d*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else e.genMipmaps||i(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&i(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var o=e.width,a=e.height,u=e.channels;i(o>0&&o<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),i(o===a,"cube map must be square"),i(t.wrapS===g&&t.wrapT===g,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];i(c.width===o&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(i(!c.compressed,"can not generate mipmap for compressed textures"),i(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var d=f[l];if(d){var h=o>>l,p=a>>l;i(c.mipmask&1<<l,"missing mipmap data"),i(d.width===h&&d.height===p,"invalid shape for mip images"),i(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed||(d.data?i(d.data.byteLength===h*p*Math.max(O(d.type,u),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}}),L=0,R=0;function F(e,t){this.id=L++,this.type=e,this.data=t}function P(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(t.length>1&&n===r&&('"'===n||"'"===n))return['"'+P(t.substr(1,t.length-2))+'"'];var i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(i)return e(t.substr(0,i.index)).concat(e(i[1])).concat(e(t.substr(i.index+i[0].length)));var o=t.split(".");if(1===o.length)return['"'+P(t)+'"'];for(var a=[],u=0;u<o.length;++u)a=a.concat(e(o[u]));return a}(e).join("][")+"]"}var B={DynamicVariable:F,define:function(e,t){return new F(e,z(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof F},unbox:function(e,t){return"function"==typeof e?new F(R,e):e},accessor:z},I={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},q="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function N(e){return"string"==typeof e?e.split():(j(Array.isArray(e),"invalid extension array"),e)}function H(e){return"string"==typeof e?(j("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function V(e){var n,r,i,o,a,u=e||{},s={},c=[],f=[],l="undefined"==typeof window?1:window.devicePixelRatio,d=!1,h=function(e){e&&j.raise(e)},p=function(){};if("string"==typeof u?(j("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(u),j(n,"invalid query string for element")):"object"==typeof u?"string"==typeof(a=u).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?n=u:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(u)?i=(o=u).canvas:(j.constructor(u),"gl"in u?o=u.gl:"canvas"in u?i=H(u.canvas):"container"in u&&(r=H(u.container)),"attributes"in u&&(s=u.attributes,j.type(s,"object","invalid context attributes")),"extensions"in u&&(c=N(u.extensions)),"optionalExtensions"in u&&(f=N(u.optionalExtensions)),"onDone"in u&&(j.type(u.onDone,"function","invalid or missing onDone callback"),h=u.onDone),"profile"in u&&(d=!!u.profile),"pixelRatio"in u&&(l=+u.pixelRatio,j(l>0,"invalid pixel ratio"))):j.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:r=n),!o){if(!i){j("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(e,n,r){var i=document.createElement("canvas");function o(){var n=window.innerWidth,o=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,t(i.style,{width:n+"px",height:o+"px"})}return t(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",t(e.style,{margin:0,padding:0})),window.addEventListener("resize",o,!1),o(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",o),e.removeChild(i)}}}(r||document.body,0,l);if(!m)return null;i=m.canvas,p=m.onDestroy}o=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,s)}return o?{gl:o,canvas:i,container:r,extensions:c,optionalExtensions:f,pixelRatio:l,profile:d,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function U(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var G=5120,W=5121,X=5122,Y=5123,Q=5124,Z=5125,K=5126;function J(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function $(){var e=U(8,function(){return[]});function t(t){var n=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),r=e[J(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[J(t.byteLength)>>2].push(t)}return{alloc:t,free:n,allocType:function(e,n){var r=null;switch(e){case G:r=new Int8Array(t(n),0,n);break;case W:r=new Uint8Array(t(n),0,n);break;case X:r=new Int16Array(t(2*n),0,n);break;case Y:r=new Uint16Array(t(2*n),0,n);break;case Q:r=new Int32Array(t(4*n),0,n);break;case Z:r=new Uint32Array(t(4*n),0,n);break;case K:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){n(e.buffer)}}}var ee=$();ee.zero=$();var te=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var o=!!t.oes_texture_float;if(o){var a=e.createTexture();e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=e.createFramebuffer();if(e.bindFramebuffer(36160,u),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=ee.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?o=!1:(e.deleteFramebuffer(u),e.deleteTexture(a),o=1===s[0]),ee.freeType(s)}}var c=!0,f=e.createTexture(),l=ee.allocType(5121,36);return e.activeTexture(33984),e.bindTexture(34067,f),e.texImage2D(34069,0,6408,3,3,0,6408,5121,l),ee.freeType(l),e.bindTexture(34067,null),e.deleteTexture(f),c=!e.getError(),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:o,npotTextureCube:c}};function ne(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var re=function(e){return Object.keys(e).map(function(t){return e[t]})},ie={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||ee.allocType(n,i);switch(t.length){case 0:break;case 1:!function(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}(e,t[0],a);break;case 2:!function(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],u=0;u<n;++u)r[i++]=a[u]}(e,t[0],t[1],a);break;case 3:oe(e,t[0],t[1],t[2],a,0);break;default:!function e(t,n,r,i,o){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)oe(t[u],c,f,l,i,o),o+=a}else for(u=0;u<s;++u)e(t[u],n,r+1,i,o),o+=a}(e,t,0,a,0)}return a}};function oe(e,t,n,r,i,o){for(var a=o,u=0;u<t;++u)for(var s=e[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)i[a++]=f[l]}var ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ue={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},se={dynamic:35048,stream:35040,static:35044},ce=ie.flatten,fe=ie.shape,le=35044,de=35040,he=5121,pe=5126,me=[];function be(e){return 0|ae[Object.prototype.toString.call(e)]}function ve(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function ge(e,t,n,r,i,o,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)e[u++]=t[i*s+o*c+a]}me[5120]=1,me[5122]=2,me[5124]=4,me[5121]=1,me[5123]=2,me[5125]=4,me[5126]=4;var ye={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_e=0,xe=1,we=4,Me=5120,Ae=5121,ke=5122,Ee=5123,Se=5124,Ce=5125,Te=34963,Oe=35040,De=35044,je=new Float32Array(1),Le=new Uint32Array(je.buffer),Re=5123;function Fe(e){for(var t=ee.allocType(Re,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{je[0]=e[n];var r=Le[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var u=-14-o;t[n]=i+(a+1024>>u)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function Pe(t){return Array.isArray(t)||e(t)}var ze=function(e){return!(e&e-1||!e)},Be=34467,Ie=3553,qe=34067,Ne=34069,He=6408,Ve=6406,Ue=6407,Ge=6409,We=6410,Xe=32854,Ye=32855,Qe=36194,Ze=32819,Ke=32820,Je=33635,$e=34042,et=6402,tt=34041,nt=35904,rt=35906,it=36193,ot=33776,at=33777,ut=33778,st=33779,ct=35986,ft=35987,lt=34798,dt=35840,ht=35841,pt=35842,mt=35843,bt=36196,vt=5121,gt=5123,yt=5125,_t=5126,xt=10242,wt=10243,Mt=10497,At=33071,kt=33648,Et=10240,St=10241,Ct=9728,Tt=9729,Ot=9984,Dt=9985,jt=9986,Lt=9987,Rt=33170,Ft=4352,Pt=4353,zt=4354,Bt=34046,It=3317,qt=37440,Nt=37441,Ht=37443,Vt=37444,Ut=33984,Gt=[Ot,jt,Dt,Lt],Wt=[0,Ge,We,Ue,He],Xt={};function Yt(e){return"[object "+e+"]"}Xt[Ge]=Xt[Ve]=Xt[et]=1,Xt[tt]=Xt[We]=2,Xt[Ue]=Xt[nt]=3,Xt[He]=Xt[rt]=4;var Qt=Yt("HTMLCanvasElement"),Zt=Yt("CanvasRenderingContext2D"),Kt=Yt("ImageBitmap"),Jt=Yt("HTMLImageElement"),$t=Yt("HTMLVideoElement"),en=Object.keys(ae).concat([Qt,Zt,Kt,Jt,$t]),tn=[];tn[vt]=1,tn[_t]=4,tn[it]=2,tn[gt]=2,tn[yt]=4;var nn=[];function rn(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function on(e){if(!Array.isArray(e))return!1;var t=e.length;return!(0===t||!Pe(e[0]))}function an(e){return Object.prototype.toString.call(e)}function un(e){return an(e)===Qt}function sn(e){if(!e)return!1;var t=an(e);return en.indexOf(t)>=0||rn(e)||on(e)||ne(e)}function cn(e){return 0|ae[Object.prototype.toString.call(e)]}function fn(e,t){return ee.allocType(e.type===it?_t:e.type,t)}function ln(e,t){e.type===it?(e.data=Fe(t),ee.freeType(t)):e.data=t}function dn(e,t,n,r,i,o){var a;if(a=void 0!==nn[e]?nn[e]:Xt[e]*tn[t],o&&(a*=6),i){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function hn(n,r,i,o,a,u,s){var c={"don't care":Ft,"dont care":Ft,nice:zt,fast:Pt},f={repeat:Mt,clamp:At,mirror:kt},l={nearest:Ct,linear:Tt},d=t({mipmap:Lt,"nearest mipmap nearest":Ot,"linear mipmap nearest":Dt,"nearest mipmap linear":jt,"linear mipmap linear":Lt},l),h={none:0,browser:Vt},p={uint8:vt,rgba4:Ze,rgb565:Je,"rgb5 a1":Ke},m={alpha:Ve,luminance:Ge,"luminance alpha":We,rgb:Ue,rgba:He,rgba4:Xe,"rgb5 a1":Ye,rgb565:Qe},b={};r.ext_srgb&&(m.srgb=nt,m.srgba=rt),r.oes_texture_float&&(p.float32=p.float=_t),r.oes_texture_half_float&&(p.float16=p["half float"]=it),r.webgl_depth_texture&&(t(m,{depth:et,"depth stencil":tt}),t(p,{uint16:gt,uint32:yt,"depth stencil":$e})),r.webgl_compressed_texture_s3tc&&t(b,{"rgb s3tc dxt1":ot,"rgba s3tc dxt1":at,"rgba s3tc dxt3":ut,"rgba s3tc dxt5":st}),r.webgl_compressed_texture_atc&&t(b,{"rgb atc":ct,"rgba atc explicit alpha":ft,"rgba atc interpolated alpha":lt}),r.webgl_compressed_texture_pvrtc&&t(b,{"rgb pvrtc 4bppv1":dt,"rgb pvrtc 2bppv1":ht,"rgba pvrtc 4bppv1":pt,"rgba pvrtc 2bppv1":mt}),r.webgl_compressed_texture_etc1&&(b["rgb etc1"]=bt);var v=Array.prototype.slice.call(n.getParameter(Be));Object.keys(b).forEach(function(e){var t=b[e];v.indexOf(t)>=0&&(m[e]=t)});var g=Object.keys(m);i.textureFormats=g;var y=[];Object.keys(m).forEach(function(e){var t=m[e];y[t]=e});var _=[];Object.keys(p).forEach(function(e){var t=p[e];_[t]=e});var x=[];Object.keys(l).forEach(function(e){var t=l[e];x[t]=e});var w=[];Object.keys(d).forEach(function(e){var t=d[e];w[t]=e});var M=[];Object.keys(f).forEach(function(e){var t=f[e];M[t]=e});var A=g.reduce(function(e,t){var n=m[t];return n===Ge||n===Ve||n===Ge||n===We||n===et||n===tt?e[n]=n:n===Ye||t.indexOf("rgba")>=0?e[n]=He:e[n]=Ue,e},{});function k(){this.internalformat=He,this.format=He,this.type=vt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Vt,this.width=0,this.height=0,this.channels=0}function E(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function S(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(j.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(j.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(j.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(j.parameter(t.colorSpace,h,"invalid colorSpace"),e.colorSpace=h[t.colorSpace]),"type"in t){var n=t.type;j(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),j(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),j(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),j.parameter(n,p,"invalid texture type"),e.type=p[n]}var o=e.width,a=e.height,u=e.channels,s=!1;"shape"in t?(j(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),o=t.shape[0],a=t.shape[1],3===t.shape.length&&(u=t.shape[2],j(u>0&&u<=4,"invalid number of channels"),s=!0),j(o>=0&&o<=i.maxTextureSize,"invalid width"),j(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in t&&(o=a=t.radius,j(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in t&&(o=t.width,j(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in t&&(a=t.height,j(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in t&&(u=t.channels,j(u>0&&u<=4,"invalid number of channels"),s=!0)),e.width=0|o,e.height=0|a,e.channels=0|u;var c=!1;if("format"in t){var f=t.format;j(r.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),j.parameter(f,m,"invalid texture format");var l=e.internalformat=m[f];e.format=A[l],f in p&&("type"in t||(e.type=p[f])),f in b&&(e.compressed=!0),c=!0}!s&&c?e.channels=Xt[e.format]:s&&!c?e.channels!==Wt[e.format]&&(e.format=e.internalformat=Wt[e.channels]):c&&s&&j(e.channels===Xt[e.format],"number of channels inconsistent with specified format")}}function C(e){n.pixelStorei(qt,e.flipY),n.pixelStorei(Nt,e.premultiplyAlpha),n.pixelStorei(Ht,e.colorSpace),n.pixelStorei(It,e.unpackAlignment)}function T(){k.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function O(t,n){var r=null;if(sn(n)?r=n:n&&(j.type(n,"object","invalid pixel data type"),S(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),sn(n.data)&&(r=n.data)),j(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){j(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,u=a.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||u-t.yOffset,t.needsCopy=!0,j(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<u&&t.width>0&&t.width<=o&&t.height>0&&t.height<=u,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==vt||(t.type=cn(r));else if(rn(r))t.channels=t.channels||4,function(e,t){var n=t.length;switch(e.type){case vt:case gt:case yt:case _t:var r=ee.allocType(e.type,n);r.set(t),e.data=r;break;case it:e.data=Fe(t);break;default:j.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(ne(r)){var s=r.data;Array.isArray(s)||t.type!==vt||(t.type=cn(s));var c,f,l,d,h,p,m=r.shape,b=r.stride;3===m.length?(l=m[2],p=b[2]):(j(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=m[0],f=m[1],d=b[0],h=b[1],t.alignment=1,t.width=c,t.height=f,t.channels=l,t.format=t.internalformat=Wt[l],t.needsFree=!0,function(e,t,n,r,i,o){for(var a=e.width,u=e.height,s=e.channels,c=fn(e,a*u*s),f=0,l=0;l<u;++l)for(var d=0;d<a;++d)for(var h=0;h<s;++h)c[f++]=t[n*d+r*l+i*h+o];ln(e,c)}(t,s,d,h,p,r.offset)}else if(un(r)||an(r)===Zt)un(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return an(e)===Kt}(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(function(e){return an(e)===Jt}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(e){return an(e)===$t}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(on(r)){var v=t.width||r[0].length,g=t.height||r.length,y=t.channels;y=Pe(r[0][0])?y||r[0][0].length:y||1;for(var _=ie.shape(r),x=1,w=0;w<_.length;++w)x*=_[w];var M=fn(t,x);ie.flatten(r,_,"",M),ln(t,M),t.alignment=1,t.width=v,t.height=g,t.channels=y,t.format=t.internalformat=Wt[y],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===_t?j(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===it&&j(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function D(e,t,r){var i=e.element,a=e.data,u=e.internalformat,s=e.format,c=e.type,f=e.width,l=e.height,d=e.channels;if(C(e),i)n.texImage2D(t,r,s,s,c,i);else if(e.compressed)n.compressedTexImage2D(t,r,u,f,l,0,a);else if(e.needsCopy)o(),n.copyTexImage2D(t,r,s,e.xOffset,e.yOffset,f,l,0);else{var h=!a;h&&(a=ee.zero.allocType(c,f*l*d)),n.texImage2D(t,r,s,f,l,0,s,c,a),h&&a&&ee.zero.freeType(a)}}function L(e,t,r,i,a){var u=e.element,s=e.data,c=e.internalformat,f=e.format,l=e.type,d=e.width,h=e.height;C(e),u?n.texSubImage2D(t,a,r,i,f,l,u):e.compressed?n.compressedTexSubImage2D(t,a,r,i,c,d,h,s):e.needsCopy?(o(),n.copyTexSubImage2D(t,a,r,i,e.xOffset,e.yOffset,d,h)):n.texSubImage2D(t,a,r,i,d,h,f,l,s)}var R=[];function F(){return R.pop()||new T}function P(e){e.needsFree&&ee.freeType(e.data),T.call(e),R.push(e)}function z(e,t,n){var r=e.images[0]=F();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function B(e,t){var n=null;if(sn(t))E(n=e.images[0]=F(),e),O(n,t),e.mipmask=1;else if(S(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)E(n=e.images[i]=F(),e),n.width>>=i,n.height>>=i,O(n,r[i]),e.mipmask|=1<<i;else E(n=e.images[0]=F(),e),O(n,t),e.mipmask=1;E(e,e.images[0]),(e.compressed&&e.internalformat===ot||e.internalformat===at||e.internalformat===ut||e.internalformat===st)&&j(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function I(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;D(n[r],t,r)}}var q=[];function N(){var e=q.pop()||new function(){k.call(this),this.genMipmaps=!1,this.mipmapHint=Ft,this.mipmask=0,this.images=Array(16)};k.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function H(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&P(t[n]),t[n]=null;q.push(e)}function V(){this.minFilter=Ct,this.magFilter=Ct,this.wrapS=At,this.wrapT=At,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ft}function U(e,t){if("min"in t){var n=t.min;j.parameter(n,d),e.minFilter=d[n],Gt.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;j.parameter(r,l),e.magFilter=l[r]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var u=t.wrap;"string"==typeof u?(j.parameter(u,f),o=a=f[u]):Array.isArray(u)&&(j.parameter(u[0],f),j.parameter(u[1],f),o=f[u[0]],a=f[u[1]])}else{if("wrapS"in t){var s=t.wrapS;j.parameter(s,f),o=f[s]}if("wrapT"in t){var h=t.wrapT;j.parameter(h,f),a=f[h]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var p=t.anisotropic;j("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var m=!1;switch(typeof t.mipmap){case"string":j.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,m=!0;break;case"boolean":m=e.genMipmaps=t.mipmap;break;case"object":j(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,m=!0;break;default:j.raise("invalid mipmap type")}!m||"min"in t||(e.minFilter=Ot)}}function G(e,t){n.texParameteri(t,St,e.minFilter),n.texParameteri(t,Et,e.magFilter),n.texParameteri(t,xt,e.wrapS),n.texParameteri(t,wt,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,Bt,e.anisotropic),e.genMipmaps&&(n.hint(Rt,e.mipmapHint),n.generateMipmap(t))}var W=0,X={},Y=i.maxTextureUnits,Q=Array(Y).map(function(){return null});function Z(e){k.call(this),this.mipmask=0,this.internalformat=He,this.id=W++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new V,s.profile&&(this.stats={size:0})}function K(e){n.activeTexture(Ut),n.bindTexture(e.target,e.texture)}function J(){var e=Q[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(Ie,null)}function $(e){var t=e.texture;j(t,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(n.activeTexture(Ut+r),n.bindTexture(i,null),Q[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete X[e.id],u.textureCount--}return t(Z.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var t=0;t<Y;++t){var r=Q[t];if(r){if(r.bindCount>0)continue;r.unit=-1}Q[t]=this,e=t;break}e>=Y&&j.raise("insufficient number of texture units"),s.profile&&u.maxTextureUnits<e+1&&(u.maxTextureUnits=e+1),this.unit=e,n.activeTexture(Ut+e),n.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$(this)}}),s.profile&&(u.getTotalTextureSize=function(){var e=0;return Object.keys(X).forEach(function(t){e+=X[t].stats.size}),e}),{create2D:function(e,t){var r=new Z(Ie);function o(e,t){var n=r.texInfo;V.call(n);var a=N();return"number"==typeof e?z(a,0|e,"number"==typeof t?0|t:0|e):e?(j.type(e,"object","invalid arguments to regl.texture"),U(n,e),B(a,e)):z(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,E(r,a),j.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,K(r),I(a,Ie),G(n,Ie),J(),H(a),s.profile&&(r.stats.size=dn(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=y[r.internalformat],o.type=_[r.type],o.mag=x[n.magFilter],o.min=w[n.minFilter],o.wrapS=M[n.wrapS],o.wrapT=M[n.wrapT],o}return X[r.id]=r,u.textureCount++,o(e,t),o.subimage=function(e,t,n,i){j(!!e,"must specify image data");var a=0|t,u=0|n,s=0|i,c=F();return E(c,r),c.width=0,c.height=0,O(c,e),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,j(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),j(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),j(r.mipmask&1<<s,"missing mipmap data"),j(c.data||c.element||c.needsCopy,"missing image data"),K(r),L(c,Ie,a,u,s),J(),P(c),o},o.resize=function(e,t){var i,a=0|e,u=0|t||a;if(a===r.width&&u===r.height)return o;o.width=r.width=a,o.height=r.height=u,K(r);for(var c=r.channels,f=r.type,l=0;r.mipmask>>l;++l){var d=a>>l,h=u>>l;if(!d||!h)break;i=ee.zero.allocType(f,d*h*c),n.texImage2D(Ie,l,r.format,d,h,0,r.format,r.type,i),i&&ee.zero.freeType(i)}return J(),s.profile&&(r.stats.size=dn(r.internalformat,r.type,a,u,!1,!1)),o},o._reglType="texture2d",o._texture=r,s.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o},createCube:function(e,t,r,o,a,c){var f=new Z(qe);X[f.id]=f,u.cubeCount++;var l=new Array(6);function d(e,t,n,r,o,a){var u,c=f.texInfo;for(V.call(c),u=0;u<6;++u)l[u]=N();if("number"!=typeof e&&e)if("object"==typeof e)if(t)B(l[0],e),B(l[1],t),B(l[2],n),B(l[3],r),B(l[4],o),B(l[5],a);else if(U(c,e),S(f,e),"faces"in e){var h=e.faces;for(j(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),u=0;u<6;++u)j("object"==typeof h[u]&&!!h[u],"invalid input for cube map face"),E(l[u],f),B(l[u],h[u])}else for(u=0;u<6;++u)B(l[u],e);else j.raise("invalid arguments to cube map");else{var p=0|e||1;for(u=0;u<6;++u)z(l[u],p,p)}for(E(f,l[0]),i.npotTextureCube||j(ze(f.width)&&ze(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(l[0].width<<1)-1:f.mipmask=l[0].mipmask,j.textureCube(f,c,l,i),f.internalformat=l[0].internalformat,d.width=l[0].width,d.height=l[0].height,K(f),u=0;u<6;++u)I(l[u],Ne+u);for(G(c,qe),J(),s.profile&&(f.stats.size=dn(f.internalformat,f.type,d.width,d.height,c.genMipmaps,!0)),d.format=y[f.internalformat],d.type=_[f.type],d.mag=x[c.magFilter],d.min=w[c.minFilter],d.wrapS=M[c.wrapS],d.wrapT=M[c.wrapT],u=0;u<6;++u)H(l[u]);return d}return d(e,t,r,o,a,c),d.subimage=function(e,t,n,r,i){j(!!t,"must specify image data"),j("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,u=0|i,s=F();return E(s,f),s.width=0,s.height=0,O(s,t),s.width=s.width||(f.width>>u)-o,s.height=s.height||(f.height>>u)-a,j(f.type===s.type&&f.format===s.format&&f.internalformat===s.internalformat,"incompatible format for texture.subimage"),j(o>=0&&a>=0&&o+s.width<=f.width&&a+s.height<=f.height,"texture.subimage write out of bounds"),j(f.mipmask&1<<u,"missing mipmap data"),j(s.data||s.element||s.needsCopy,"missing image data"),K(f),L(s,Ne+e,o,a,u),J(),P(s),d},d.resize=function(e){var t=0|e;if(t!==f.width){d.width=f.width=t,d.height=f.height=t,K(f);for(var r=0;r<6;++r)for(var i=0;f.mipmask>>i;++i)n.texImage2D(Ne+r,i,f.format,t>>i,t>>i,0,f.format,f.type,null);return J(),s.profile&&(f.stats.size=dn(f.internalformat,f.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=f,s.profile&&(d.stats=f.stats),d.destroy=function(){f.decRef()},d},clear:function(){for(var e=0;e<Y;++e)n.activeTexture(Ut+e),n.bindTexture(Ie,null),Q[e]=null;re(X).forEach($),u.cubeCount=0,u.textureCount=0},getTexture:function(e){return null},restore:function(){re(X).forEach(function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===Ie)n.texImage2D(Ie,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(Ne+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);G(e.texInfo,e.target)})}}}nn[Xe]=2,nn[Ye]=2,nn[Qe]=2,nn[tt]=4,nn[ot]=.5,nn[at]=.5,nn[ut]=1,nn[st]=1,nn[ct]=.5,nn[ft]=1,nn[lt]=1,nn[dt]=.5,nn[ht]=.25,nn[pt]=.5,nn[mt]=.25,nn[bt]=.5;var pn=36161,mn=32854,bn=[];function vn(e,t,n){return bn[e]*t*n}bn[mn]=2,bn[32855]=2,bn[36194]=2,bn[33189]=2,bn[36168]=1,bn[34041]=4,bn[35907]=4,bn[34836]=16,bn[34842]=8,bn[34843]=6;var gn=function(e,t,n,r,i){var o={rgba4:mn,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(o.srgba=35907),t.ext_color_buffer_half_float&&(o.rgba16f=34842,o.rgb16f=34843),t.webgl_color_buffer_float&&(o.rgba32f=34836);var a=[];Object.keys(o).forEach(function(e){var t=o[e];a[t]=e});var u=0,s={};function c(e){this.id=u++,this.refCount=1,this.renderbuffer=e,this.format=mn,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function f(t){var n=t.renderbuffer;j(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(pn,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete s[t.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(s).forEach(function(t){e+=s[t].stats.size}),e}),{create:function(t,u){var f=new c(e.createRenderbuffer());function l(t,r){var u=0,s=0,c=mn;if("object"==typeof t&&t){var d=t;if("shape"in d){var h=d.shape;j(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),u=0|h[0],s=0|h[1]}else"radius"in d&&(u=s=0|d.radius),"width"in d&&(u=0|d.width),"height"in d&&(s=0|d.height);"format"in d&&(j.parameter(d.format,o,"invalid renderbuffer format"),c=o[d.format])}else"number"==typeof t?(u=0|t,s="number"==typeof r?0|r:u):t?j.raise("invalid arguments to renderbuffer constructor"):u=s=1;if(j(u>0&&s>0&&u<=n.maxRenderbufferSize&&s<=n.maxRenderbufferSize,"invalid renderbuffer size"),u!==f.width||s!==f.height||c!==f.format)return l.width=f.width=u,l.height=f.height=s,f.format=c,e.bindRenderbuffer(pn,f.renderbuffer),e.renderbufferStorage(pn,c,u,s),j(0===e.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=vn(f.format,f.width,f.height)),l.format=a[f.format],l}return s[f.id]=f,r.renderbufferCount++,l(t,u),l.resize=function(t,r){var o=0|t,a=0|r||o;return o===f.width&&a===f.height?l:(j(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=o,l.height=f.height=a,e.bindRenderbuffer(pn,f.renderbuffer),e.renderbufferStorage(pn,f.format,o,a),j(0===e.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=vn(f.format,f.width,f.height)),l)},l._reglType="renderbuffer",l._renderbuffer=f,i.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){re(s).forEach(f)},restore:function(){re(s).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(pn,t.renderbuffer),e.renderbufferStorage(pn,t.format,t.width,t.height)}),e.bindRenderbuffer(pn,null)}}},yn=36160,_n=36161,xn=3553,wn=34069,Mn=36064,An=36096,kn=36128,En=33306,Sn=36053,Cn=6402,Tn=[6407,6408],On=[];On[6408]=4,On[6407]=3;var Dn=[];Dn[5121]=1,Dn[5126]=4,Dn[36193]=2;var jn=33189,Ln=36168,Rn=34041,Fn=[32854,32855,36194,35907,34842,34843,34836],Pn={};Pn[Sn]="complete",Pn[36054]="incomplete attachment",Pn[36057]="incomplete dimensions",Pn[36055]="incomplete, missing attachment",Pn[36061]="unsupported";var zn=5126;function Bn(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=zn,this.offset=0,this.stride=0,this.divisor=0}var In=35632,qn=35633,Nn=35718,Hn=35721;function Vn(e,t,n,r){var i={},o={};function a(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function u(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function s(n,r,a){var u=n===In?i:o,s=u[r];if(!s){var c=t.str(r);s=e.createShader(n),e.shaderSource(s,c),e.compileShader(s),j.shaderError(e,s,c,n,a),u[r]=s}return s}var c={},f=[],l=0;function d(n,i){var o,c,f=s(In,n.fragId),l=s(qn,n.vertId),d=n.program=e.createProgram();e.attachShader(d,f),e.attachShader(d,l),e.linkProgram(d),j.linkError(e,d,t.str(n.fragId),t.str(n.vertId),i);var h=e.getProgramParameter(d,Nn);r.profile&&(n.stats.uniformsCount=h);var p=n.uniforms;for(o=0;o<h;++o)if(c=e.getActiveUniform(d,o))if(c.size>1)for(var m=0;m<c.size;++m){var b=c.name.replace("[0]","["+m+"]");u(p,new a(b,t.id(b),e.getUniformLocation(d,b),c))}else u(p,new a(c.name,t.id(c.name),e.getUniformLocation(d,c.name),c));var v=e.getProgramParameter(d,Hn);r.profile&&(n.stats.attributesCount=v);var g=n.attributes;for(o=0;o<v;++o)(c=e.getActiveAttrib(d,o))&&u(g,new a(c.name,t.id(c.name),e.getAttribLocation(d,c.name),c))}return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return f.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return f.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);re(i).forEach(t),i={},re(o).forEach(t),o={},f.forEach(function(t){e.deleteProgram(t.program)}),f.length=0,c={},n.shaderCount=0},program:function(e,t,i){j.command(e>=0,"missing vertex shader",i),j.command(t>=0,"missing fragment shader",i);var o=c[t];o||(o=c[t]={});var a=o[e];return a||(a=new function(e,t){this.id=l++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(t,e),n.shaderCount++,d(a,i),o[e]=a,f.push(a)),a},restore:function(){i={},o={};for(var e=0;e<f.length;++e)d(f[e])},shader:s,frag:-1,vert:-1}}var Un=6408,Gn=5121,Wn=3333,Xn=5126;function Yn(t,n,r,i,o,a,u){function s(s){var c;null===n.next?(j(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=Gn):(j(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(j(c===Gn||c===Xn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Xn&&j(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):j(c===Gn,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,d=i.framebufferWidth,h=i.framebufferHeight,p=null;e(s)?p=s:s&&(j.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,j(f>=0&&f<i.framebufferWidth,"invalid x offset for regl.read"),j(l>=0&&l<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(s.width||i.framebufferWidth-f),h=0|(s.height||i.framebufferHeight-l),p=s.data||null),p&&(c===Gn?j(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Xn&&j(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),j(d>0&&d+f<=i.framebufferWidth,"invalid width for read pixels"),j(h>0&&h+l<=i.framebufferHeight,"invalid height for read pixels"),r();var m=d*h*4;return p||(c===Gn?p=new Uint8Array(m):c===Xn&&(p=p||new Float32Array(m))),j.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),j(p.byteLength>=m,"data buffer for regl.read() too small"),t.pixelStorei(Wn,4),t.readPixels(f,l,d,h,Un,c,p),p}return function(e){return e&&"framebuffer"in e?function(e){var t;return n.setFBO({framebuffer:e.framebuffer},function(){t=s(e)}),t}(e):s(e)}}function Qn(e){return Array.prototype.slice.call(e)}function Zn(e){return Qn(e).join("")}var Kn="xyzw".split(""),Jn=5121,$n=1,er=2,tr=0,nr=1,rr=2,ir=3,or=4,ar="dither",ur="blend.enable",sr="blend.color",cr="blend.equation",fr="blend.func",lr="depth.enable",dr="depth.func",hr="depth.range",pr="depth.mask",mr="colorMask",br="cull.enable",vr="cull.face",gr="frontFace",yr="lineWidth",_r="polygonOffset.enable",xr="polygonOffset.offset",wr="sample.alpha",Mr="sample.enable",Ar="sample.coverage",kr="stencil.enable",Er="stencil.mask",Sr="stencil.func",Cr="stencil.opFront",Tr="stencil.opBack",Or="scissor.enable",Dr="scissor.box",jr="viewport",Lr="profile",Rr="framebuffer",Fr="vert",Pr="frag",zr="elements",Br="primitive",Ir="count",qr="offset",Nr="instances",Hr=Rr+"Width",Vr=Rr+"Height",Ur=jr+"Width",Gr=jr+"Height",Wr="drawingBufferWidth",Xr="drawingBufferHeight",Yr=[fr,cr,Sr,Cr,Tr,Ar,jr,Dr,xr],Qr=34962,Zr=34963,Kr=3553,Jr=34067,$r=2884,ei=3042,ti=3024,ni=2960,ri=2929,ii=3089,oi=32823,ai=32926,ui=32928,si=5126,ci=35664,fi=35665,li=35666,di=5124,hi=35667,pi=35668,mi=35669,bi=35670,vi=35671,gi=35672,yi=35673,_i=35674,xi=35675,wi=35676,Mi=35678,Ai=35680,ki=4,Ei=1028,Si=1029,Ci=2304,Ti=2305,Oi=32775,Di=32776,ji=519,Li=7680,Ri=0,Fi=1,Pi=32774,zi=513,Bi=36160,Ii=36064,qi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ni=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Hi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ui={frag:35632,vert:35633},Gi={cw:Ci,ccw:Ti};function Wi(t){return Array.isArray(t)||e(t)||ne(t)}function Xi(e){return e.sort(function(e,t){return e===jr?-1:t===jr?1:e<t?-1:1})}function Yi(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function Qi(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function Zi(e){return new Yi(!1,!1,!1,e)}function Ki(e,t){var n=e.type;if(n===tr){var r=e.data.length;return new Yi(!0,r>=1,r>=2,t)}if(n===or){var i=e.data;return new Yi(i.thisDep,i.contextDep,i.propDep,t)}return new Yi(n===ir,n===rr,n===nr,t)}var Ji=new Yi(!1,!1,!1,function(){});function $i(e,n,r,i,o,a,u,s,c,f,l,d,h,p,m){var b=f.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=Oi,v.max=Di);var g=r.angle_instanced_arrays,y=r.webgl_draw_buffers,_={dirty:!0,profile:m.profile},x={},w=[],M={},A={};function k(e){return e.replace(".","_")}function E(e,t,n){var r=k(e);w.push(e),x[r]=_[r]=!!n,M[r]=t}function S(e,t,n){var r=k(e);w.push(e),Array.isArray(n)?(_[r]=n.slice(),x[r]=n.slice()):_[r]=x[r]=n,A[r]=t}E(ar,ti),E(ur,ei),S(sr,"blendColor",[0,0,0,0]),S(cr,"blendEquationSeparate",[Pi,Pi]),S(fr,"blendFuncSeparate",[Fi,Ri,Fi,Ri]),E(lr,ri,!0),S(dr,"depthFunc",zi),S(hr,"depthRange",[0,1]),S(pr,"depthMask",!0),S(mr,mr,[!0,!0,!0,!0]),E(br,$r),S(vr,"cullFace",Si),S(gr,gr,Ti),S(yr,yr,1),E(_r,oi),S(xr,"polygonOffset",[0,0]),E(wr,ai),E(Mr,ui),S(Ar,"sampleCoverage",[1,!1]),E(kr,ni),S(Er,"stencilMask",-1),S(Sr,"stencilFunc",[ji,0,-1]),S(Cr,"stencilOpSeparate",[Ei,Li,Li,Li]),S(Tr,"stencilOpSeparate",[Si,Li,Li,Li]),E(Or,ii),S(Dr,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),S(jr,jr,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var C={gl:e,context:h,strings:n,next:x,current:_,draw:d,elements:a,buffer:o,shader:l,attributes:f.state,uniforms:c,framebuffer:s,extensions:r,timer:p,isBufferArgs:Wi},T={primTypes:ye,compareFuncs:Hi,blendFuncs:qi,blendEquations:v,stencilOps:Vi,glTypes:ue,orientationType:Gi};j.optional(function(){C.isArrayLike=Pe}),y&&(T.backBuffer=[Si],T.drawBuffer=U(i.maxDrawbuffers,function(e){return 0===e?[0]:U(e,function(e){return Ii+e})}));var O=0;function D(){var e=function(){var e=0,n=[],r=[];function i(){var n=[],r=[];return t(function(){n.push.apply(n,Qn(arguments))},{def:function(){var t="v"+e++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Qn(arguments)),n.push(";")),t},toString:function(){return Zn([r.length>0?"var "+r+";":"",Zn(n)])}})}function o(){var e=i(),n=i(),r=e.toString,o=n.toString;function a(t,r){n(t,r,"=",e.def(t,r),";")}return t(function(){e.apply(e,Qn(arguments))},{def:e.def,entry:e,exit:n,save:a,set:function(t,n,r){a(t,n),e(t,n,"=",r,";")},toString:function(){return r()+o()}})}var a=i(),u={};return{global:a,link:function(t){for(var i=0;i<r.length;++i)if(r[i]===t)return n[i];var o="g"+e++;return n.push(o),r.push(t),o},block:i,proc:function(e,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var a=0;a<n;++a)i();var s=o(),c=s.toString;return u[e]=t(s,{arg:i,toString:function(){return Zn(["function(",r.join(),"){",c(),"}"])}})},scope:o,cond:function(){var e=Zn(arguments),n=o(),r=o(),i=n.toString,a=r.toString;return t(n,{then:function(){return n.apply(n,Qn(arguments)),this},else:function(){return r.apply(r,Qn(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),Zn(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(u).forEach(function(t){e.push('"',t,'":',u[t].toString(),",")}),e.push("}");var t=Zn(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}}}(),r=e.link,i=e.global;e.id=O++,e.batchId="0";var o=r(C),a=e.shared={props:"a0"};Object.keys(C).forEach(function(e){a[e]=i.def(o,".",e)}),j.optional(function(){e.CHECK=r(j),e.commandStr=j.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},T.invalidBlendCombinations=Ni});var u=e.next={},s=e.current={};Object.keys(A).forEach(function(e){Array.isArray(_[e])&&(u[e]=i.def(a.next,".",e),s[e]=i.def(a.current,".",e))});var c=e.constants={};Object.keys(T).forEach(function(e){c[e]=i.def(JSON.stringify(T[e]))}),e.invoke=function(t,n){switch(n.type){case tr:var i=["this",a.context,a.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case nr:return t.def(a.props,n.data);case rr:return t.def(a.context,n.data);case ir:return t.def("this",n.data);case or:return n.data.append(e,t),n.data.ref}},e.attribCache={};var l={};return e.scopeAttrib=function(e){var t=n.id(e);if(t in l)return l[t];var i=f.scope[t];i||(i=f.scope[t]=new b);var o=l[t]=r(i);return o},e}function L(e,t,r,u,c){var f=e.static,d=e.dynamic;j.optional(function(){var e=[Rr,Fr,Pr,zr,Br,qr,Ir,Nr,Lr].concat(w);function t(t){Object.keys(t).forEach(function(t){j.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',c.commandStr)})}t(f),t(d)});var h=function(e,t){var n=e.static,r=e.dynamic;if(Rr in n){var i=n[Rr];return i?(i=s.getFramebuffer(i),j.command(i,"invalid framebuffer object"),Zi(function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+Hr,n+".width"),t.set(o,"."+Vr,n+".height"),n})):Zi(function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+Hr,r+"."+Wr),t.set(r,"."+Vr,r+"."+Xr),"null"})}if(Rr in r){var o=r[Rr];return Ki(o,function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");j.optional(function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")}),t.set(i,".next",a);var u=r.context;return t.set(u,"."+Hr,a+"?"+a+".width:"+u+"."+Wr),t.set(u,"."+Vr,a+"?"+a+".height:"+u+"."+Xr),a})}return null}(e),p=function(e,t,n){var r=e.static,i=e.dynamic;function o(e){if(e in r){var o=r[e];j.commandType(o,"object","invalid "+e,n.commandStr);var a,u,s=!0,c=0|o.x,f=0|o.y;return"width"in o?(a=0|o.width,j.command(a>=0,"invalid "+e,n.commandStr)):s=!1,"height"in o?(u=0|o.height,j.command(u>=0,"invalid "+e,n.commandStr)):s=!1,new Yi(!s&&t&&t.thisDep,!s&&t&&t.contextDep,!s&&t&&t.propDep,function(e,t){var n=e.shared.context,r=a;"width"in o||(r=t.def(n,".",Hr,"-",c));var i=u;return"height"in o||(i=t.def(n,".",Vr,"-",f)),[c,f,r,i]})}if(e in i){var l=i[e],d=Ki(l,function(t,n){var r=t.invoke(n,l);j.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)});var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Hr,"-",o,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Vr,"-",a,")");return j.optional(function(){t.assert(n,u+">=0&&"+s+">=0","invalid "+e)}),[o,a,u,s]});return t&&(d.thisDep=d.thisDep||t.thisDep,d.contextDep=d.contextDep||t.contextDep,d.propDep=d.propDep||t.propDep),d}return t?new Yi(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",Hr),t.def(n,".",Vr)]}):null}var a=o(jr);if(a){var u=a;a=new Yi(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=u.append(e,t),r=e.shared.context;return t.set(r,"."+Ur,n[2]),t.set(r,"."+Gr,n[3]),n})}return{viewport:a,scissor_box:o(Dr)}}(e,h,c),m=function(e,t){var n=e.static,r=e.dynamic,i=function(){if(zr in n){var e=n[zr];Wi(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),j.command(e,"invalid elements",t.commandStr));var i=Zi(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null});return i.value=e,i}if(zr in r){var o=r[zr];return Ki(o,function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,o),u=t.def("null"),s=t.def(r,"(",a,")"),c=e.cond(s).then(u,"=",i,".createStream(",a,");").else(u,"=",i,".getElements(",a,");");return j.optional(function(){e.assert(c.else,"!"+a+"||"+u,"invalid elements")}),t.entry(c),t.exit(e.cond(s).then(i,".destroyStream(",u,");")),e.ELEMENTS=u,u})}return null}();function o(e,o){if(e in n){var a=0|n[e];return j.command(!o||a>=0,"invalid "+e,t.commandStr),Zi(function(e,t){return o&&(e.OFFSET=a),a})}if(e in r){var u=r[e];return Ki(u,function(t,n){var r=t.invoke(n,u);return o&&(t.OFFSET=r,j.optional(function(){t.assert(n,r+">=0","invalid "+e)})),r})}return o&&i?Zi(function(e,t){return e.OFFSET="0",0}):null}var u=o(qr,!0);return{elements:i,primitive:function(){if(Br in n){var e=n[Br];return j.commandParameter(e,ye,"invalid primitve",t.commandStr),Zi(function(t,n){return ye[e]})}if(Br in r){var o=r[Br];return Ki(o,function(e,t){var n=e.constants.primTypes,r=e.invoke(t,o);return j.optional(function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(ye))}),t.def(n,"[",r,"]")})}return i?Qi(i)?i.value?Zi(function(e,t){return t.def(e.ELEMENTS,".primType")}):Zi(function(){return ki}):new Yi(i.thisDep,i.contextDep,i.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",ki)}):null}(),count:function(){if(Ir in n){var e=0|n[Ir];return j.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),Zi(function(){return e})}if(Ir in r){var o=r[Ir];return Ki(o,function(e,t){var n=e.invoke(t,o);return j.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n})}if(i){if(Qi(i)){if(i)return u?new Yi(u.thisDep,u.contextDep,u.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return j.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):Zi(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var a=Zi(function(){return-1});return j.optional(function(){a.MISSING=!0}),a}var s=new Yi(i.thisDep||u.thisDep,i.contextDep||u.contextDep,i.propDep||u.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")});return j.optional(function(){s.DYNAMIC=!0}),s}return null}(),instances:o(Nr,!1),offset:u}}(e,c),y=function(e,t){var n=e.static,r=e.dynamic,o={};return w.forEach(function(e){var a=k(e);function u(t,i){if(e in n){var u=t(n[e]);o[a]=Zi(function(){return u})}else if(e in r){var s=r[e];o[a]=Ki(s,function(e,t){return i(e,t,e.invoke(t,s))})}}switch(e){case br:case ur:case ar:case kr:case lr:case Or:case _r:case wr:case Mr:case pr:return u(function(n){return j.commandType(n,"boolean",e,t.commandStr),n},function(t,n,r){return j.optional(function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)}),r});case dr:return u(function(n){return j.commandParameter(n,Hi,"invalid "+e,t.commandStr),Hi[n]},function(t,n,r){var i=t.constants.compareFuncs;return j.optional(function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Hi))}),n.def(i,"[",r,"]")});case hr:return u(function(e){return j.command(Pe(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,n){return j.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]});case fr:return u(function(e){j.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return j.commandParameter(n,qi,a+".srcRGB",t.commandStr),j.commandParameter(r,qi,a+".srcAlpha",t.commandStr),j.commandParameter(i,qi,a+".dstRGB",t.commandStr),j.commandParameter(o,qi,a+".dstAlpha",t.commandStr),j.command(-1===Ni.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[qi[n],qi[i],qi[r],qi[o]]},function(t,n,r){var i=t.constants.blendFuncs;function o(o,a){var u=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return j.optional(function(){t.assert(n,u+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys(qi))}),u}j.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=o("src","RGB"),u=o("dst","RGB");j.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var s=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[s,n.def(i,"[",u,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]});case cr:return u(function(n){return"string"==typeof n?(j.commandParameter(n,v,"invalid "+e,t.commandStr),[v[n],v[n]]):"object"==typeof n?(j.commandParameter(n.rgb,v,e+".rgb",t.commandStr),j.commandParameter(n.alpha,v,e+".alpha",t.commandStr),[v[n.rgb],v[n.alpha]]):void j.commandRaise("invalid blend.equation",t.commandStr)},function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),u=t.cond("typeof ",r,'==="string"');return j.optional(function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(u.then,e,r),t.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(u.else,e+".rgb",r+".rgb"),n(u.else,e+".alpha",r+".alpha")}),u.then(o,"=",a,"=",i,"[",r,"];"),u.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(u),[o,a]});case sr:return u(function(e){return j.command(Pe(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),U(4,function(t){return+e[t]})},function(e,t,n){return j.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),U(4,function(e){return t.def("+",n,"[",e,"]")})});case Er:return u(function(e){return j.commandType(e,"number",a,t.commandStr),0|e},function(e,t,n){return j.optional(function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")}),t.def(n,"|0")});case Sr:return u(function(n){j.commandType(n,"object",a,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return j.commandParameter(r,Hi,e+".cmp",t.commandStr),j.commandType(i,"number",e+".ref",t.commandStr),j.commandType(o,"number",e+".mask",t.commandStr),[Hi[r],i,o]},function(e,t,n){var r=e.constants.compareFuncs;return j.optional(function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Li),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case Cr:case Tr:return u(function(n){j.commandType(n,"object",a,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return j.commandParameter(r,Vi,e+".fail",t.commandStr),j.commandParameter(i,Vi,e+".zfail",t.commandStr),j.commandParameter(o,Vi,e+".zpass",t.commandStr),[e===Tr?Si:Ei,Vi[r],Vi[i],Vi[o]]},function(t,n,r){var i=t.constants.stencilOps;function o(o){return j.optional(function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(Vi))}),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Li)}return j.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[e===Tr?Si:Ei,o("fail"),o("zfail"),o("zpass")]});case xr:return u(function(e){j.commandType(e,"object",a,t.commandStr);var n=0|e.factor,r=0|e.units;return j.commandType(n,"number",a+".factor",t.commandStr),j.commandType(r,"number",a+".units",t.commandStr),[n,r]},function(t,n,r){return j.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case vr:return u(function(e){var n=0;return"front"===e?n=Ei:"back"===e&&(n=Si),j.command(!!n,a,t.commandStr),n},function(e,t,n){return j.optional(function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),t.def(n,'==="front"?',Ei,":",Si)});case yr:return u(function(e){return j.command("number"==typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e},function(e,t,n){return j.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")}),n});case gr:return u(function(e){return j.commandParameter(e,Gi,a,t.commandStr),Gi[e]},function(e,t,n){return j.optional(function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(n+'==="cw"?'+Ci+":"+Ti)});case mr:return u(function(e){return j.command(Pe(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,n){return j.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),U(4,function(e){return"!!"+n+"["+e+"]"})});case Ar:return u(function(e){j.command("object"==typeof e&&e,a,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return j.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]},function(e,t,n){return j.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]})}}),o}(e,c),_=function(e){var t=e.static,r=e.dynamic;function i(e){if(e in t){var i=n.id(t[e]);j.optional(function(){l.shader(Ui[e],i,j.guessCommand())});var o=Zi(function(){return i});return o.id=i,o}if(e in r){var a=r[e];return Ki(a,function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return j.optional(function(){n(t.shared.shader,".shader(",Ui[e],",",i,",",t.command,");")}),i})}return null}var o,a=i(Pr),u=i(Fr),s=null;return Qi(a)&&Qi(u)?(s=l.program(u.id,a.id),o=Zi(function(e,t){return e.link(s)})):o=new Yi(a&&a.thisDep||u&&u.thisDep,a&&a.contextDep||u&&u.contextDep,a&&a.propDep||u&&u.propDep,function(e,t){var n,r,i=e.shared.shader;n=a?a.append(e,t):t.def(i,".",Pr),r=u?u.append(e,t):t.def(i,".",Fr);var o=i+".program("+r+","+n;return j.optional(function(){o+=","+e.command}),t.def(o+")")}),{frag:a,vert:u,progVar:o,program:s}}(e);function x(e){var t=p[e];t&&(y[e]=t)}x(jr),x(k(Dr));var M=Object.keys(y).length>0,A={framebuffer:h,draw:m,shader:_,state:y,dirty:M};return A.profile=function(e){var t,n=e.static,r=e.dynamic;if(Lr in n){var i=!!n[Lr];(t=Zi(function(e,t){return i})).enable=i}else if(Lr in r){var o=r[Lr];t=Ki(o,function(e,t){return e.invoke(t,o)})}return t}(e),A.uniforms=function(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach(function(e){var r,o=n[e];if("number"==typeof o||"boolean"==typeof o)r=Zi(function(){return o});else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Zi(function(e){return e.link(o)}):"framebuffer"===a||"framebufferCube"===a?(j.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=Zi(function(e){return e.link(o.color[0])})):j.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else Pe(o)?r=Zi(function(t){return t.global.def("[",U(o.length,function(n){return j.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+e,t.commandStr),o[n]}),"]")}):j.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r}),Object.keys(r).forEach(function(e){var t=r[e];i[e]=Ki(t,function(e,n){return e.invoke(n,t)})}),i}(r,c),A.attributes=function(e,t){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach(function(e){var i=r[e],u=n.id(e),s=new b;if(Wi(i))s.state=$n,s.buffer=o.getBuffer(o.create(i,Qr,!1,!0)),s.type=0;else{var c=o.getBuffer(i);if(c)s.state=$n,s.buffer=c,s.type=0;else if(j.command("object"==typeof i&&i,"invalid data for attribute "+e,t.commandStr),"constant"in i){var f=i.constant;s.buffer="null",s.state=er,"number"==typeof f?s.x=f:(j.command(Pe(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+e,t.commandStr),Kn.forEach(function(e,t){t<f.length&&(s[e]=f[t])}))}else{c=Wi(i.buffer)?o.getBuffer(o.create(i.buffer,Qr,!1,!0)):o.getBuffer(i.buffer),j.command(!!c,'missing buffer for attribute "'+e+'"',t.commandStr);var l=0|i.offset;j.command(l>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var d=0|i.stride;j.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var h=0|i.size;j.command(!("size"in i)||h>0&&h<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!i.normalized,m=0;"type"in i&&(j.commandParameter(i.type,ue,"invalid type for attribute "+e,t.commandStr),m=ue[i.type]);var v=0|i.divisor;"divisor"in i&&(j.command(0===v||g,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),j.command(v>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),j.optional(function(){var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach(function(t){j.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)})}),s.buffer=c,s.state=$n,s.size=h,s.normalized=p,s.type=m||c.dtype,s.offset=l,s.stride=d,s.divisor=v}}a[e]=Zi(function(e,t){var n=e.attribCache;if(u in n)return n[u];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[u]=r,r})}),Object.keys(i).forEach(function(e){var t=i[e];a[e]=Ki(t,function(n,r){var i=n.invoke(r,t),o=n.shared,a=o.isBufferArgs,u=o.buffer;j.optional(function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+a+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+a+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')});var s={isStream:r.def(!1)},c=new b;c.state=$n,Object.keys(c).forEach(function(e){s[e]=r.def(""+c[e])});var f=s.buffer,l=s.type;function d(e){r(s[e],"=",i,".",e,"|0;")}return r("if(",a,"(",i,")){",s.isStream,"=true;",f,"=",u,".createStream(",Qr,",",i,");",l,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",l,"=",f,".dtype;",'}else if("constant" in ',i,"){",s.state,"=",er,";","if(typeof "+i+'.constant === "number"){',s[Kn[0]],"=",i,".constant;",Kn.slice(1).map(function(e){return s[e]}).join("="),"=0;","}else{",Kn.map(function(e,t){return s[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",a,"(",i,".buffer)){",f,"=",u,".createStream(",Qr,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",l,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",f,".dtype;",s.normalized,"=!!",i,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",s.isStream,"){",u,".destroyStream(",f,");","}"),s})}),a}(t,c),A.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=Zi(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=Ki(t,function(e,n){return e.invoke(n,t)})}),r}(u),A}function R(e,t,n){var r=e.shared,i=r.context,o=e.scope();Object.keys(n).forEach(function(r){t.save(i,"."+r);var a=n[r];o(i,".",r,"=",a.append(e,t),";")}),t(o)}function F(e,t,n,r){var i,o=e.shared,a=o.gl,u=o.framebuffer;y&&(i=t.def(o.extensions,".webgl_draw_buffers"));var s,c=e.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(e,t):t.def(u,".next"),r||t("if(",s,"!==",u,".cur){"),t("if(",s,"){",a,".bindFramebuffer(",Bi,",",s,".framebuffer);"),y&&t(i,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Bi,",null);"),y&&t(i,".drawBuffersWEBGL(",l,");"),t("}",u,".cur=",s,";"),r||t("}")}function P(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,u=r.current,s=r.next,c=e.cond(u,".dirty");w.forEach(function(t){var r,f,l=k(t);if(!(l in n.state))if(l in a){r=a[l],f=o[l];var d=U(_[l].length,function(e){return c.def(r,"[",e,"]")});c(e.cond(d.map(function(e,t){return e+"!=="+f+"["+t+"]"}).join("||")).then(i,".",A[l],"(",d,");",d.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";"))}else{r=c.def(s,".",l);var h=e.cond(r,"!==",u,".",l);c(h),l in M?h(e.cond(r).then(i,".enable(",M[l],");").else(i,".disable(",M[l],");"),u,".",l,"=",r,";"):h(i,".",A[l],"(",r,");",u,".",l,"=",r,";")}}),0===Object.keys(n.state).length&&c(u,".dirty=false;"),t(c)}function z(e,t,n,r){var i=e.shared,o=e.current,a=i.current,u=i.gl;Xi(Object.keys(n)).forEach(function(i){var s=n[i];if(!r||r(s)){var c=s.append(e,t);if(M[i]){var f=M[i];Qi(s)?t(u,c?".enable(":".disable(",f,");"):t(e.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),t(a,".",i,"=",c,";")}else if(Pe(c)){var l=o[i];t(u,".",A[i],"(",c,");",c.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";")}else t(u,".",A[i],"(",c,");",a,".",i,"=",c,";")}})}function I(e,t){g&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function q(e,t,n,r,i){var o,a,u,s=e.shared,c=e.stats,f=s.current,l=s.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(e){o=t.def(),e(o,"=",h(),";"),"string"==typeof i?e(c,".count+=",i,";"):e(c,".count++;"),p&&(r?(a=t.def(),e(a,"=",l,".getNumPendingQueries();")):e(l,".beginQuery(",c,");"))}function b(e){e(c,".cpuTime+=",h(),"-",o,";"),p&&(r?e(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):e(l,".endQuery();"))}function v(e){var n=t.def(f,".profile");t(f,".profile=",e,";"),t.exit(f,".profile=",n,";")}if(d){if(Qi(d))return void(d.enable?(m(t),b(t.exit),v("true")):v("false"));v(u=d.append(e,t))}else u=t.def(f,".profile");var g=e.block();m(g),t("if(",u,"){",g,"}");var y=e.block();b(y),t.exit("if(",u,"){",y,"}")}function N(e,t,n,r,i){var o=e.shared;r.forEach(function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!i(s))return;a=s.append(e,t)}else{if(!i(Ji))return;var c=e.scopeAttrib(u);j.optional(function(){e.assert(t,c+".state","missing attribute "+u)}),a={},Object.keys(new b).forEach(function(e){a[e]=t.def(c,".",e)})}!function(n,r,i){var a=o.gl,u=t.def(n,".location"),s=t.def(o.attributes,"[",u,"]"),c=i.state,f=i.buffer,l=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function h(){t("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",s,".type!==",o,"||",s,".size!==",n,"||",d.map(function(e){return s+"."+e+"!=="+i[e]}).join("||"),"){",a,".bindBuffer(",Qr,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,o,i.normalized,i.stride,i.offset],");",s,".type=",o,";",s,".size=",n,";",d.map(function(e){return s+"."+e+"="+i[e]+";"}).join(""),"}"),g){var c=i.divisor;t("if(",s,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){t("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");","}if(",Kn.map(function(e,t){return s+"."+e+"!=="+l[t]}).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",Kn.map(function(e,t){return s+"."+e+"="+l[t]+";"}).join(""),"}")}c===$n?h():c===er?p():(t("if(",c,"===",$n,"){"),h(),t("}else{"),p(),t("}"))}(e.link(r),function(e){switch(e){case ci:case hi:case vi:return 2;case fi:case pi:case gi:return 3;case li:case mi:case yi:return 4;default:return 1}}(r.info.type),a)})}function H(e,t,r,i,o){for(var a,u=e.shared,s=u.gl,c=0;c<i.length;++c){var f,l=i[c],d=l.name,h=l.info.type,p=r.uniforms[d],m=e.link(l),b=m+".location";if(p){if(!o(p))continue;if(Qi(p)){var v=p.value;if(j.command(null!==v&&void 0!==v,'missing uniform "'+d+'"',e.commandStr),h===Mi||h===Ai){j.command("function"==typeof v&&(h===Mi&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||h===Ai&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+d,e.commandStr);var g=e.link(v._texture||v.color[0]._texture);t(s,".uniform1i(",b,",",g+".bind());"),t.exit(g,".unbind();")}else if(h===_i||h===xi||h===wi){j.optional(function(){j.command(Pe(v),"invalid matrix for uniform "+d,e.commandStr),j.command(h===_i&&4===v.length||h===xi&&9===v.length||h===wi&&16===v.length,"invalid length for matrix uniform "+d,e.commandStr)});var y=e.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),_=2;h===xi?_=3:h===wi&&(_=4),t(s,".uniformMatrix",_,"fv(",b,",false,",y,");")}else{switch(h){case si:j.commandType(v,"number","uniform "+d,e.commandStr),a="1f";break;case ci:j.command(Pe(v)&&2===v.length,"uniform "+d,e.commandStr),a="2f";break;case fi:j.command(Pe(v)&&3===v.length,"uniform "+d,e.commandStr),a="3f";break;case li:j.command(Pe(v)&&4===v.length,"uniform "+d,e.commandStr),a="4f";break;case bi:j.commandType(v,"boolean","uniform "+d,e.commandStr),a="1i";break;case di:j.commandType(v,"number","uniform "+d,e.commandStr),a="1i";break;case vi:case hi:j.command(Pe(v)&&2===v.length,"uniform "+d,e.commandStr),a="2i";break;case gi:case pi:j.command(Pe(v)&&3===v.length,"uniform "+d,e.commandStr),a="3i";break;case yi:case mi:j.command(Pe(v)&&4===v.length,"uniform "+d,e.commandStr),a="4i"}t(s,".uniform",a,"(",b,",",Pe(v)?Array.prototype.slice.call(v):v,");")}continue}f=p.append(e,t)}else{if(!o(Ji))continue;f=t.def(u.uniforms,"[",n.id(d),"]")}h===Mi?t("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):h===Ai&&t("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),j.optional(function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(e){n("typeof "+f+'==="'+e+'"',"invalid type, expected "+e)}function i(t,r){n(u.isArrayLike+"("+f+")&&"+f+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function o(t){n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(t===Kr?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(h){case di:r("number");break;case hi:i(2);break;case pi:i(3);break;case mi:i(4);break;case si:r("number");break;case ci:i(2);break;case fi:i(3);break;case li:i(4);break;case bi:r("boolean");break;case vi:i(2);break;case gi:i(3);break;case yi:case _i:i(4);break;case xi:i(9);break;case wi:i(16);break;case Mi:o(Kr);break;case Ai:o(Jr)}});var x=1;switch(h){case Mi:case Ai:var w=t.def(f,"._texture");t(s,".uniform1i(",b,",",w,".bind());"),t.exit(w,".unbind();");continue;case di:case bi:a="1i";break;case hi:case vi:a="2i",x=2;break;case pi:case gi:a="3i",x=3;break;case mi:case yi:a="4i",x=4;break;case si:a="1f";break;case ci:a="2f",x=2;break;case fi:a="3f",x=3;break;case li:a="4f",x=4;break;case _i:a="Matrix2fv";break;case xi:a="Matrix3fv";break;case wi:a="Matrix4fv"}if(t(s,".uniform",a,"(",b,","),"M"===a.charAt(0)){var M=Math.pow(h-_i+2,2),A=e.global.def("new Float32Array(",M,")");t("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",U(M,function(e){return A+"["+e+"]="+f+"["+e+"]"}),",",A,")")}else t(x>1?U(x,function(e){return f+"["+e+"]"}):f);t(");")}}function V(e,t,n,r){var i=e.shared,o=i.gl,a=i.draw,u=r.draw,s=function(){var i,s=u.elements,c=t;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),i=s.append(e,c)):i=c.def(a,".",zr),i&&c("if("+i+")"+o+".bindBuffer("+Zr+","+i+".buffer.buffer);"),i}();function c(i){var o=u[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(a,".",i)}var f,l,d=c(Br),h=c(qr),p=function(){var i,o=u.count,s=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(s=n),i=o.append(e,s),j.optional(function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(s,i+">=0","missing vertex count")})):(i=s.def(a,".",Ir),j.optional(function(){e.assert(s,i+">=0","missing vertex count")})),i}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");g&&(f=c(Nr),l=e.instancing);var m=s+".type",b=u.elements&&Qi(u.elements);function v(){function e(){n(l,".drawElementsInstancedANGLE(",[d,p,m,h+"<<(("+m+"-"+Jn+")>>1)",f],");")}function t(){n(l,".drawArraysInstancedANGLE(",[d,h,p,f],");")}s?b?e():(n("if(",s,"){"),e(),n("}else{"),t(),n("}")):t()}function y(){function e(){n(o+".drawElements("+[d,p,m,h+"<<(("+m+"-"+Jn+")>>1)"]+");")}function t(){n(o+".drawArrays("+[d,h,p]+");")}s?b?e():(n("if(",s,"){"),e(),n("}else{"),t(),n("}")):t()}g&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),v(),n("}else if(",f,"<0){"),y(),n("}")):v():y()}function G(e,t,n,r,i){var o=D(),a=o.proc("body",i);return j.optional(function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)}),g&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function W(e,t,n,r){I(e,t),N(e,t,n,r.attributes,function(){return!0}),H(e,t,n,r.uniforms,function(){return!0}),V(e,t,t,n)}function X(e,t,n,r){function i(){return!0}e.batchId="a1",I(e,t),N(e,t,n,r.attributes,i),H(e,t,n,r.uniforms,i),V(e,t,t,n)}function Y(e,t,n,r){I(e,t);var i=n.contextDep,o=t.def(),a=t.def();e.shared.props=a,e.batchId=o;var u=e.scope(),s=e.scope();function c(e){return e.contextDep&&i||e.propDep}function f(e){return!c(e)}if(t(u.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",a,"=","a0","[",o,"];",s,"}",u.exit),n.needsContext&&R(e,s,n.context),n.needsFramebuffer&&F(e,s,n.framebuffer),z(e,s,n.state,c),n.profile&&c(n.profile)&&q(e,s,n,!1,!0),r)N(e,u,n,r.attributes,f),N(e,s,n,r.attributes,c),H(e,u,n,r.uniforms,f),H(e,s,n,r.uniforms,c),V(e,u,s,n);else{var l=e.global.def("{}"),d=n.shader.progVar.append(e,s),h=s.def(d,".id"),p=s.def(l,"[",h,"]");s(e.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",l,"[",h,"]=",e.link(function(t){return G(X,e,n,t,2)}),"(",d,");}",p,".call(this,a0[",o,"],",o,");")}}function Q(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!Pe(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(B.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,o=Object.keys(r),a=!1,u=!1,s=!1,c=e.global.def("{}");o.forEach(function(t){var n=r[t];if(B.isDynamic(n)){"function"==typeof n&&(n=r[t]=B.unbox(n));var o=Ki(n,null);a=a||o.thisDep,s=s||o.propDep,u=u||o.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}}),t.dynamic[n]=new B.DynamicVariable(or,{thisDep:a,contextDep:u,propDep:s,ref:c,append:function(e,t){o.forEach(function(n){var i=r[n];if(B.isDynamic(i)){var o=e.invoke(t,i);t(c,".",n,"=",o,";")}})}}),delete t.static[n]}}return{next:x,current:_,procs:function(){var e=D(),t=e.proc("poll"),n=e.proc("refresh"),r=e.block();t(r),n(r);var o,a=e.shared,u=a.gl,s=a.next,c=a.current;r(c,".dirty=false;"),F(e,t),F(e,n,null,!0),g&&(o=e.link(g));for(var f=0;f<i.maxAttributes;++f){var l=n.def(a.attributes,"[",f,"]"),d=e.cond(l,".buffer");d.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",Qr,",",l,".buffer.buffer);",u,".vertexAttribPointer(",f,",",l,".size,",l,".type,",l,".normalized,",l,".stride,",l,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",l,".x,",l,".y,",l,".z,",l,".w);",l,".buffer=null;"),n(d),g&&n(o,".vertexAttribDivisorANGLE(",f,",",l,".divisor);")}return Object.keys(M).forEach(function(i){var o=M[i],a=r.def(s,".",i),f=e.block();f("if(",a,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",c,".",i,"=",a,";"),n(f),t("if(",a,"!==",c,".",i,"){",f,"}")}),Object.keys(A).forEach(function(i){var o,a,f=A[i],l=_[i],d=e.block();if(d(u,".",f,"("),Pe(l)){var h=l.length;o=e.global.def(s,".",i),a=e.global.def(c,".",i),d(U(h,function(e){return o+"["+e+"]"}),");",U(h,function(e){return a+"["+e+"]="+o+"["+e+"];"}).join("")),t("if(",U(h,function(e){return o+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",d,"}")}else o=r.def(s,".",i),a=r.def(c,".",i),d(o,");",c,".",i,"=",o,";"),t("if(",o,"!==",a,"){",d,"}");n(d)}),e.compile()}(),compile:function(e,t,r,i,o){var a=D();a.stats=a.link(o),Object.keys(t.static).forEach(function(e){Q(a,t,e)}),Yr.forEach(function(t){Q(a,e,t)});var u=L(e,t,r,i,a);return function(e,t){var n=e.proc("draw",1);I(e,n),R(e,n,t.context),F(e,n,t.framebuffer),P(e,n,t),z(e,n,t.state),q(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)W(e,n,t,t.shader.program);else{var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link(function(n){return G(W,e,t,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}(a,u),function(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;function a(n){var o=t.shader[n];o&&r.set(i.shader,"."+n,o.append(e,r))}R(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),Xi(Object.keys(t.state)).forEach(function(n){var o=t.state[n].append(e,r);Pe(o)?o.forEach(function(t,i){r.set(e.next[n],"["+i+"]",t)}):r.set(i.next,"."+n,o)}),q(e,r,t,!0,!0),[zr,qr,Ir,Nr,Br].forEach(function(n){var o=t.draw[n];o&&r.set(i.draw,"."+n,""+o.append(e,r))}),Object.keys(t.uniforms).forEach(function(o){r.set(i.uniforms,"["+n.id(o)+"]",t.uniforms[o].append(e,r))}),Object.keys(t.attributes).forEach(function(n){var i=t.attributes[n].append(e,r),o=e.scopeAttrib(n);Object.keys(new b).forEach(function(e){r.set(o,"."+e,i[e])})}),a(Fr),a(Pr),Object.keys(t.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(a,u),function(e,t){var n=e.proc("batch",2);e.batchId="0",I(e,n);var r=!1,i=!0;Object.keys(t.context).forEach(function(e){r=r||t.context[e].propDep}),r||(R(e,n,t.context),i=!1);var o=t.framebuffer,a=!1;function u(e){return e.contextDep&&r||e.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||F(e,n,o)):F(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),P(e,n,t),z(e,n,t.state,function(e){return!u(e)}),t.profile&&u(t.profile)||q(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=a;var s=t.shader.progVar;if(s.contextDep&&r||s.propDep)Y(e,n,t,null);else{var c=s.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)Y(e,n,t,t.shader.program);else{var f=e.global.def("{}"),l=n.def(c,".id"),d=n.def(f,"[",l,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",f,"[",l,"]=",e.link(function(n){return G(Y,e,t,n,2)}),"(",c,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}(a,u),a.compile()}}}var eo=34918,to=34919,no=35007,ro=function(e,t){var n=t.ext_disjoint_timer_query;if(!n)return null;var r=[];function i(e){r.push(e)}var o=[],a=[];function u(e){a.push(e)}var s=[];function c(e,t,n){var r=a.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(e){var t=r.pop()||n.createQueryEXT();n.beginQueryEXT(no,t),o.push(t),c(o.length-1,o.length,e)},endQuery:function(){n.endQueryEXT(no)},pushScopeStats:c,update:function(){var e,t,r=o.length;if(0!==r){l.length=Math.max(l.length,r+1),f.length=Math.max(f.length,r+1),f[0]=0,l[0]=0;var a=0;for(e=0,t=0;t<o.length;++t){var c=o[t];n.getQueryObjectEXT(c,to)?(a+=n.getQueryObjectEXT(c,eo),i(c)):o[e++]=c,f[t+1]=a,l[t+1]=e}for(o.length=e,e=0,t=0;t<s.length;++t){var d=s[t],h=d.startQueryIndex,p=d.endQueryIndex;d.sum+=f[p]-f[h];var m=l[h],b=l[p];b===m?(d.stats.gpuTime+=d.sum/1e6,u(d)):(d.startQueryIndex=m,d.endQueryIndex=b,s[e++]=d)}s.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){r.push.apply(r,o);for(var e=0;e<r.length;e++)n.deleteQueryEXT(r[e]);o.length=0,r.length=0},restore:function(){o.length=0,r.length=0}}},io=16384,oo=256,ao=1024,uo=34962,so="webglcontextlost",co="webglcontextrestored",fo=1,lo=2,ho=3;function po(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(n){var r=V(n);if(!r)return null;var i=r.gl,o=i.getContextAttributes(),a=i.isContextLost(),u=function(e,t){var n={};function r(t){j.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(!r(e))throw new Error("(regl): error restoring extension "+e)})}}}(i,r);if(!u)return null;var s,c,f=(s={"":0},c=[""],{id:function(e){var t=s[e];return t||(t=s[e]=c.length,c.push(e),t)},str:function(e){return c[e]}}),l={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=u.extensions,h=ro(i,d),p=q(),m=i.drawingBufferWidth,b=i.drawingBufferHeight,v={tick:0,time:0,viewportWidth:m,viewportHeight:b,framebufferWidth:m,framebufferHeight:b,drawingBufferWidth:m,drawingBufferHeight:b,pixelRatio:r.pixelRatio},g=te(i,d),y=function(e,t,n,r){for(var i=n.maxAttributes,o=new Array(i),a=0;a<i;++a)o[a]=new Bn;return{Record:Bn,scope:{},state:o}}(0,0,g),_=function(t,n,r,i){var o=0,a={};function u(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=le,this.byteLength=0,this.dimension=1,this.dtype=he,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function f(t,n,r,i,o,a){var u,s;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||pe,n.length>0)if(Array.isArray(n[0])){u=fe(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];t.dimension=f,s=ce(n,u,t.dtype),c(t,s,r),a?t.persistentData=s:ee.freeType(s)}else if("number"==typeof n[0]){t.dimension=o;var d=ee.allocType(t.dtype,n.length);ve(d,n),c(t,d,r),a?t.persistentData=d:ee.freeType(d)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||be(n[0])||pe,s=ce(n,[n.length,n[0].length],t.dtype),c(t,s,r),a?t.persistentData=s:ee.freeType(s)):j.raise("invalid buffer data")}else if(e(n))t.dtype=i||be(n),t.dimension=o,c(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(ne(n)){u=n.shape;var h=n.stride,p=n.offset,m=0,b=0,v=0,g=0;1===u.length?(m=u[0],b=1,v=h[0],g=0):2===u.length?(m=u[0],b=u[1],v=h[0],g=h[1]):j.raise("invalid shape"),t.dtype=i||be(n.data)||pe,t.dimension=b;var y=ee.allocType(t.dtype,m*b);ge(y,n.data,m,b,v,g,p),c(t,y,r),a?t.persistentData=y:ee.freeType(y)}else j.raise("invalid buffer data")}function l(e){n.bufferCount--;for(var r=0;r<i.state.length;++r){var o=i.state[r];o.buffer===e&&(t.disableVertexAttribArray(r),o.buffer=null)}var u=e.buffer;j(u,"buffer must not be deleted already"),t.deleteBuffer(u),e.buffer=null,delete a[e.id]}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(i,o,s,c){n.bufferCount++;var d=new u(o);function h(n){var i=le,o=null,a=0,u=0,s=1;return Array.isArray(n)||e(n)||ne(n)?o=n:"number"==typeof n?a=0|n:n&&(j.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(j(null===o||Array.isArray(o)||e(o)||ne(o),"invalid data for buffer"),o=n.data),"usage"in n&&(j.parameter(n.usage,se,"invalid buffer usage"),i=se[n.usage]),"type"in n&&(j.parameter(n.type,ue,"invalid buffer type"),u=ue[n.type]),"dimension"in n&&(j.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(j.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),d.bind(),o?f(d,o,i,u,s,c):(a&&t.bufferData(d.type,a,i),d.dtype=u||he,d.usage=i,d.dimension=s,d.byteLength=a),r.profile&&(d.stats.size=d.byteLength*me[d.dtype]),h}function p(e,n){j(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}return a[d.id]=d,s||h(i),h._reglType="buffer",h._buffer=d,h.subdata=function(t,n){var r,i=0|(n||0);if(d.bind(),e(t))p(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var o=ee.allocType(d.dtype,t.length);ve(o,t),p(o,i),ee.freeType(o)}else if(Array.isArray(t[0])||e(t[0])){r=fe(t);var a=ce(t,r,d.dtype);p(a,i),ee.freeType(a)}else j.raise("invalid buffer data")}else if(ne(t)){r=t.shape;var u=t.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):j.raise("invalid shape");var m=Array.isArray(t.data)?d.dtype:be(t.data),b=ee.allocType(m,s*c);ge(b,t.data,s,c,f,l,t.offset),p(b,i),ee.freeType(b)}else j.raise("invalid data for buffer subdata");return h},r.profile&&(h.stats=d.stats),h.destroy=function(){l(d)},h},createStream:function(e,t){var n=s.pop();return n||(n=new u(e)),n.bind(),f(n,t,de,0,1,!1),n},destroyStream:function(e){s.push(e)},clear:function(){re(a).forEach(l),s.forEach(l)},getBuffer:function(e){return e&&e._buffer instanceof u?e._buffer:null},restore:function(){re(a).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:f}}(i,l,r,y),x=function(t,n,r,i){var o={},a=0,u={uint8:Ae,uint16:Ee};function s(e){this.id=a++,o[this.id]=this,this.buffer=e,this.primType=we,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=Ce),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(i,o,a,u,s,c,f){if(i.buffer.bind(),o){var l=f;f||e(o)&&(!ne(o)||e(o.data))||(l=n.oes_element_index_uint?Ce:Ee),r._initBuffer(i.buffer,o,a,l,3)}else t.bufferData(Te,c,a),i.buffer.dtype=d||Ae,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;var d=f;if(!f){switch(i.buffer.dtype){case Ae:case Me:d=Ae;break;case Ee:case ke:d=Ee;break;case Ce:case Se:d=Ce;break;default:j.raise("unsupported type for element array")}i.buffer.dtype=d}i.type=d,j(d!==Ce||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=s;h<0&&(h=i.buffer.byteLength,d===Ee?h>>=1:d===Ce&&(h>>=2)),i.vertCount=h;var p=u;if(u<0){p=we;var m=i.buffer.dimension;1===m&&(p=_e),2===m&&(p=xe),3===m&&(p=we)}i.primType=p}function l(e){i.elementsCount--,j(null!==e.buffer,"must not double destroy elements"),delete o[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,n){var o=r.create(null,Te,!0),a=new s(o._buffer);function c(t){if(t)if("number"==typeof t)o(t),a.primType=we,a.vertCount=0|t,a.type=Ae;else{var n=null,r=De,i=-1,s=-1,l=0,d=0;Array.isArray(t)||e(t)||ne(t)?n=t:(j.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,j(Array.isArray(n)||e(n)||ne(n),"invalid data for element buffer")),"usage"in t&&(j.parameter(t.usage,se,"invalid element buffer usage"),r=se[t.usage]),"primitive"in t&&(j.parameter(t.primitive,ye,"invalid element buffer primitive"),i=ye[t.primitive]),"count"in t&&(j("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),s=0|t.count),"type"in t&&(j.parameter(t.type,u,"invalid buffer type"),d=u[t.type]),"length"in t?l=0|t.length:(l=s,d===Ee||d===ke?l*=2:d!==Ce&&d!==Se||(l*=4))),f(a,n,r,i,s,l,d)}else o(),a.primType=we,a.vertCount=0,a.type=Ae;return c}return i.elementsCount++,c(t),c._reglType="elements",c._elements=a,c.subdata=function(e,t){return o.subdata(e,t),c},c.destroy=function(){l(a)},c},createStream:function(e){var t=c.pop();return t||(t=new s(r.create(null,Te,!0,!1)._buffer)),f(t,e,Oe,-1,-1,0,0),t},destroyStream:function(e){c.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof s?e._elements:null},clear:function(){re(o).forEach(l)}}}(i,d,_,l),w=Vn(i,f,l,r),M=hn(i,d,g,function(){E.procs.poll()},v,l,r),A=gn(i,d,g,l,r),k=function(e,n,r,i,o,a){var u={cur:null,next:null,dirty:!1,setFBO:null},s=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function l(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);j(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;j(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(yn,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(yn,t,_n,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=xn,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),j.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,j(t===xn)):"textureCube"===o?(n=i,j(t>=wn&&t<wn+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=_n):j.raise("invalid regl object for attachment"),new l(t,n,r)}function b(e,t,n,r,a){if(n){var u=i.create2D({width:e,height:t,format:r,type:a});return u._texture.refCount=0,new l(xn,u,null)}var s=o.create({width:e,height:t,format:r});return s._renderbuffer.refCount=0,new l(_n,null,s)}function v(e){return e&&(e.texture||e.renderbuffer)}function g(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}n.oes_texture_half_float&&f.push("half float","float16"),n.oes_texture_float&&f.push("float","float32");var y=0,_={};function x(){this.id=y++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function M(t){var n=t.framebuffer;j(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete _[t.id]}function A(t){var n;e.bindFramebuffer(yn,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)p(Mn+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(yn,Mn+n,xn,null,0);e.framebufferTexture2D(yn,En,xn,null,0),e.framebufferTexture2D(yn,An,xn,null,0),e.framebufferTexture2D(yn,kn,xn,null,0),p(An,t.depthAttachment),p(kn,t.stencilAttachment),p(En,t.depthStencilAttachment);var o=e.checkFramebufferStatus(yn);o!==Sn&&j.raise("framebuffer configuration not supported, status = "+Pn[o]),e.bindFramebuffer(yn,u.next?u.next.framebuffer:null),u.cur=u.next,e.getError()}function k(e,i){var o=new x;function l(e,t){var i;j(u.next!==o,"can not update framebuffer which is currently in use");var a=n.webgl_draw_buffers,d=0,p=0,g=!0,y=!0,_=null,x=!0,M="rgba",k="uint8",E=1,S=null,C=null,T=null,O=!1;if("number"==typeof e)d=0|e,p=0|t||d;else if(e){j.type(e,"object","invalid arguments for framebuffer");var D=e;if("shape"in D){var L=D.shape;j(Array.isArray(L)&&L.length>=2,"invalid shape for framebuffer"),d=L[0],p=L[1]}else"radius"in D&&(d=p=D.radius),"width"in D&&(d=D.width),"height"in D&&(p=D.height);("color"in D||"colors"in D)&&(_=D.color||D.colors,Array.isArray(_)&&j(1===_.length||a,"multiple render targets not supported")),_||("colorCount"in D&&(E=0|D.colorCount,j(E>0,"invalid color buffer count")),"colorTexture"in D&&(x=!!D.colorTexture,M="rgba4"),"colorType"in D&&(k=D.colorType,x?(j(n.oes_texture_float||!("float"===k||"float32"===k),"you must enable OES_texture_float in order to use floating point framebuffer objects"),j(n.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===k||"float16"===k?(j(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),M="rgba16f"):"float"!==k&&"float32"!==k||(j(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),M="rgba32f"),j.oneOf(k,f,"invalid color type")),"colorFormat"in D&&(M=D.colorFormat,s.indexOf(M)>=0?x=!0:c.indexOf(M)>=0?x=!1:x?j.oneOf(D.colorFormat,s,"invalid color format for texture"):j.oneOf(D.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in D||"depthStencilTexture"in D)&&(O=!(!D.depthTexture&&!D.depthStencilTexture),j(!O||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in D&&("boolean"==typeof D.depth?g=D.depth:(S=D.depth,y=!1)),"stencil"in D&&("boolean"==typeof D.stencil?y=D.stencil:(C=D.stencil,g=!1)),"depthStencil"in D&&("boolean"==typeof D.depthStencil?g=y=D.depthStencil:(T=D.depthStencil,g=!1,y=!1))}else d=p=1;var R=null,F=null,P=null,z=null;if(Array.isArray(_))R=_.map(m);else if(_)R=[m(_)];else for(R=new Array(E),i=0;i<E;++i)R[i]=b(d,p,x,M,k);j(n.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),j(R.length<=r.maxColorAttachments,"too many color attachments, not supported"),d=d||R[0].width,p=p||R[0].height,S?F=m(S):g&&!y&&(F=b(d,p,O,"depth","uint32")),C?P=m(C):y&&!g&&(P=b(d,p,!1,"stencil","uint8")),T?z=m(T):!S&&!C&&y&&g&&(z=b(d,p,O,"depth stencil","depth stencil")),j(!!S+!!C+!!T<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var B=null;for(i=0;i<R.length;++i)if(h(R[i],d,p),j(!R[i]||R[i].texture&&Tn.indexOf(R[i].texture._texture.format)>=0||R[i].renderbuffer&&Fn.indexOf(R[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),R[i]&&R[i].texture){var I=On[R[i].texture._texture.format]*Dn[R[i].texture._texture.type];null===B?B=I:j(B===I,"all color attachments much have the same number of bits per pixel.")}return h(F,d,p),j(!F||F.texture&&F.texture._texture.format===Cn||F.renderbuffer&&F.renderbuffer._renderbuffer.format===jn,"invalid depth attachment for framebuffer object"),h(P,d,p),j(!P||P.renderbuffer&&P.renderbuffer._renderbuffer.format===Ln,"invalid stencil attachment for framebuffer object"),h(z,d,p),j(!z||z.texture&&z.texture._texture.format===Rn||z.renderbuffer&&z.renderbuffer._renderbuffer.format===Rn,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=d,o.height=p,o.colorAttachments=R,o.depthAttachment=F,o.stencilAttachment=P,o.depthStencilAttachment=z,l.color=R.map(v),l.depth=v(F),l.stencil=v(P),l.depthStencil=v(z),l.width=o.width,l.height=o.height,A(o),l}return a.framebufferCount++,l(e,i),t(l,{resize:function(e,t){j(u.next!==o,"can not resize a framebuffer which is currently in use");var n=0|e,r=0|t||n;if(n===o.width&&r===o.height)return l;for(var i=o.colorAttachments,a=0;a<i.length;++a)g(i[a],n,r);return g(o.depthAttachment,n,r),g(o.stencilAttachment,n,r),g(o.depthStencilAttachment,n,r),o.width=l.width=n,o.height=l.height=r,A(o),l},_reglType:"framebuffer",_framebuffer:o,destroy:function(){M(o),w(o)},use:function(e){u.setFBO({framebuffer:l},e)}})}return t(u,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof x)return t}return null},create:k,createCube:function(e){var o=Array(6);function a(e){var r;j(o.indexOf(u.next)<0,"can not update framebuffer which is currently in use");var c,l=n.webgl_draw_buffers,d={color:null},h=0,p=null,m="rgba",b="uint8",v=1;if("number"==typeof e)h=0|e;else if(e){j.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var y=g.shape;j(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),j(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in g&&(h=0|g.radius),"width"in g?(h=0|g.width,"height"in g&&j(g.height===h,"must be square")):"height"in g&&(h=0|g.height);("color"in g||"colors"in g)&&(p=g.color||g.colors,Array.isArray(p)&&j(1===p.length||l,"multiple render targets not supported")),p||("colorCount"in g&&(v=0|g.colorCount,j(v>0,"invalid color buffer count")),"colorType"in g&&(j.oneOf(g.colorType,f,"invalid color type"),b=g.colorType),"colorFormat"in g&&(m=g.colorFormat,j.oneOf(g.colorFormat,s,"invalid color format for texture"))),"depth"in g&&(d.depth=g.depth),"stencil"in g&&(d.stencil=g.stencil),"depthStencil"in g&&(d.depthStencil=g.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(c=[],r=0;r<p.length;++r)c[r]=p[r];else c=[p];else{c=Array(v);var _={radius:h,format:m,type:b};for(r=0;r<v;++r)c[r]=i.createCube(_)}for(d.color=Array(c.length),r=0;r<c.length;++r){var x=c[r];j("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),h=h||x.width,j(x.width===h&&x.height===h,"invalid cube map shape"),d.color[r]={target:wn,data:c[r]}}for(r=0;r<6;++r){for(var w=0;w<c.length;++w)d.color[w].target=wn+r;r>0&&(d.depth=o[0].depth,d.stencil=o[0].stencil,d.depthStencil=o[0].depthStencil),o[r]?o[r](d):o[r]=k(d)}return t(a,{width:h,height:h,color:c})}return a(e),t(a,{faces:o,resize:function(e){var t,n=0|e;if(j(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){o.forEach(function(e){e.destroy()})}})},clear:function(){re(_).forEach(M)},restore:function(){re(_).forEach(function(t){t.framebuffer=e.createFramebuffer(),A(t)})}})}(i,d,g,M,A,l),E=$i(i,f,d,g,_,x,0,k,{},y,w,{elements:null,primitive:4,count:-1,offset:0,instances:-1},v,h,r),S=Yn(i,k,E.procs.poll,v,o,d,g),C=E.next,T=i.canvas,O=[],D=[],L=[],R=[r.onDestroy],F=null;function P(){if(0===O.length)return h&&h.update(),void(F=null);F=I.next(P),Z();for(var e=O.length-1;e>=0;--e){var t=O[e];t&&t(v,null,0)}i.flush(),h&&h.update()}function z(){!F&&O.length>0&&(F=I.next(P))}function N(){F&&(I.cancel(P),F=null)}function H(e){e.preventDefault(),a=!0,N(),D.forEach(function(e){e()})}function U(e){i.getError(),a=!1,u.restore(),w.restore(),_.restore(),M.restore(),A.restore(),k.restore(),h&&h.restore(),E.procs.refresh(),z(),L.forEach(function(e){e()})}function G(e){function n(e){var t={},n={};return Object.keys(e).forEach(function(r){var i=e[r];B.isDynamic(i)?n[r]=B.unbox(i,r):t[r]=i}),{dynamic:n,static:t}}j(!!e,"invalid args to regl({...})"),j.type(e,"object","invalid args to regl({...})");var r=n(e.context||{}),i=n(e.uniforms||{}),o=n(e.attributes||{}),u=n(function(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),n}(e)),s={gpuTime:0,cpuTime:0,count:0},c=E.compile(u,o,i,r,s),f=c.draw,l=c.batch,d=c.scope,h=[];return t(function(e,t){var n;if(a&&j.raise("context lost"),"function"==typeof e)return d.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(n=0;n<e;++n)d.call(this,null,t,n);return}if(Array.isArray(e)){for(n=0;n<e.length;++n)d.call(this,e[n],t,n);return}return d.call(this,e,t,0)}if("number"==typeof e){if(e>0)return l.call(this,function(e){for(;h.length<e;)h.push(null);return h}(0|e),0|e)}else{if(!Array.isArray(e))return f.call(this,e);if(e.length)return l.call(this,e,e.length)}},{stats:s})}T&&(T.addEventListener(so,H,!1),T.addEventListener(co,U,!1));var W=k.setFBO=G({framebuffer:B.define.call(null,fo,"framebuffer")});function X(e,t){var n=0;E.procs.poll();var r=t.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=io),"depth"in t&&(i.clearDepth(+t.depth),n|=oo),"stencil"in t&&(i.clearStencil(0|t.stencil),n|=ao),j(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function Y(e){return j.type(e,"function","regl.frame() callback must be a function"),O.push(e),z(),{cancel:function(){var t=po(O,e);j(t>=0,"cannot cancel a frame twice"),O[t]=function e(){var t=po(O,e);O[t]=O[O.length-1],O.length-=1,O.length<=0&&N()}}}}function Q(){var e=C.viewport,t=C.scissor_box;e[0]=e[1]=t[0]=t[1]=0,v.viewportWidth=v.framebufferWidth=v.drawingBufferWidth=e[2]=t[2]=i.drawingBufferWidth,v.viewportHeight=v.framebufferHeight=v.drawingBufferHeight=e[3]=t[3]=i.drawingBufferHeight}function Z(){v.tick+=1,v.time=J(),Q(),E.procs.poll()}function K(){Q(),E.procs.refresh(),h&&h.update()}function J(){return(q()-p)/1e3}K();var $=t(G,{clear:function(e){if(j("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)W(t({framebuffer:e.framebuffer.faces[n]},e),X);else W(e,X);else X(null,e)},prop:B.define.bind(null,fo),context:B.define.bind(null,lo),this:B.define.bind(null,ho),draw:G({}),buffer:function(e){return _.create(e,uo,!1,!1)},elements:function(e){return x.create(e,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:A.create,framebuffer:k.create,framebufferCube:k.createCube,attributes:o,frame:Y,on:function(e,t){var n;switch(j.type(t,"function","listener callback must be a function"),e){case"frame":return Y(t);case"lost":n=D;break;case"restore":n=L;break;case"destroy":n=R;break;default:j.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:g,hasExtension:function(e){return g.extensions.indexOf(e.toLowerCase())>=0},read:S,destroy:function(){O.length=0,N(),T&&(T.removeEventListener(so,H),T.removeEventListener(co,U)),w.clear(),k.clear(),A.clear(),M.clear(),x.clear(),_.clear(),h&&h.clear(),R.forEach(function(e){e()})},_gl:i,_refresh:K,poll:function(){Z(),h&&h.update()},now:J,stats:l});return r.onDone(null,$),$}}()},function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),o=n(0),a=n.n(o);function u(e,t){const n=t[0],r=t[1],i=Math.sqrt(n*n+r*r);return e[0]=n/i,e[1]=r/i,e}function s(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function c(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function f(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t){const n=t[0],r=t[1],i=t[2],o=Math.sqrt(n*n+r*r+i*i);return e[0]=n/o,e[1]=r/o,e[2]=i/o,e}const d=[];function h(e,t,n,r){const i=(a=n,(o=t)[0]*a[0]+o[1]*a[1]+o[2]*a[2]);var o,a;const u=Math.acos(i)*r;return s(d,n,t,-i),function(e,t){const n=t[0],r=t[1],i=t[2],o=Math.sqrt(n*n+r*r+i*i);e[0]=n/o,e[1]=r/o,e[2]=i/o}(d,d),function(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}(e,t,Math.cos(u)),s(e,e,d,Math.sin(u)),e}function p(e,t,n){if(n-t<3)return 0;let r=0;for(let i=2*(n-1),o=2*t;o<2*n;){const t=e[i],n=e[i+1],a=e[o],u=e[o+1];i=o,o+=2,r+=t*u-a*n}return r}function m(e,t,n=2){return a()(e,t,n)}const b=[],v=[],g=[];function y(e,t,n,r,i,o,a,s){const f=null!=a;let l=i,d=null;f&&(d=new Uint32Array(r-n));for(let i=n;i<r;i++){const m=i===r-1?n:i+1,y=i===n?r-1:i-1,_=e[2*y],x=e[2*y+1],w=e[2*i],M=e[2*i+1],A=e[2*m],k=e[2*m+1];if(b[0]=w-_,b[1]=M-x,v[0]=A-w,v[1]=k-M,u(b,b),u(v,v),f&&(d[i]=l),s||i!==n)if(s||i!==r-1){c(g,v,b);const e=g[1];g[1]=-g[0],g[0]=e,u(g,g);const n=(p=v,(h=g)[0]*p[0]+h[1]*p[1]),r=Math.sqrt(1-n*n),i=o*Math.min(10,1/r);if(f&&1/r>a&&o*n<0){const e=w+g[0]*o,n=M+g[1]*o,i=Math.acos(r)/2,a=Math.tan(i)*Math.abs(o);t[2*l]=e+g[1]*a,t[2*l+1]=n-g[0]*a,t[2*++l]=e-g[1]*a,t[2*l+1]=n+g[0]*a,l++}else t[2*l]=w+g[0]*i,t[2*l+1]=M+g[1]*i,l++}else g[0]=b[1],g[1]=-b[0],u(g,g),t[2*l]=w+g[0]*o,t[2*l+1]=M+g[1]*o,l++;else g[0]=v[1],g[1]=-v[0],u(g,g),t[2*l]=w+g[0]*o,t[2*l+1]=M+g[1]*o,l++}var h,p;return d}function _(e,t,n,r,i){const o=null!=r?[]:new Float32Array(e.length);if(y(e,o,0,t&&t.length?t[0]:e.length/2,0,n,r,i),t)for(let a=0;a<t.length;a++){const u=t[a];y(e,o,u,t[a+1]||e.length/2,null!=r?o.length/2:u,n,r,i)}return o}function x(e,t,n,r){for(let i=0;i<Math.floor((r-n)/2);i++)for(let o=0;o<t;o++){const a=(i+n)*t+o,u=(r-i-1)*t+o,s=e[a];e[a]=e[u],e[u]=s}return e}function w(e,t){let n=e.length/2,r=0,i=t&&t.length?t[0]:n;p(e,r,i)>0&&x(e,2,r,i);for(let o=1;o<(t?t.length:0)+1;o++)p(e,r=t[o-1],i=t[o]||n)<0&&x(e,2,r,i)}function M(e){e.depth=e.depth||1,e.bevelSize=e.bevelSize||0,e.bevelSegments=null==e.bevelSegments?2:e.bevelSegments,e.smoothSide=e.smoothSide||!1,e.smoothBevel=e.smoothBevel||!1,"number"==typeof e.depth&&(e.bevelSize=Math.min(e.bevelSegments>0?e.bevelSize:0,e.depth/2)),e.bevelSize>0||(e.bevelSegments=0),e.bevelSegments=Math.round(e.bevelSegments);const t=e.boundingRect;if(e.translate=e.translate||[0,0],e.scale=e.scale||[1,1],e.fitRect){let n=null==e.fitRect.x?t.x||0:e.fitRect.x,r=null==e.fitRect.y?t.y||0:e.fitRect.y,i=e.fitRect.width,o=e.fitRect.height;null==i?null!=o?i=o/t.height*t.width:(i=t.width,o=t.height):null==o&&(o=i/t.width*t.height),e.scale=[i/t.width,o/t.height],e.translate=[(n-t.x)*e.scale[0],(r-t.y)*e.scale[1]]}}const A=[[0,0],[1,0],[1,1],[0,0],[1,1],[0,1]];function k(e,{vertices:t,topVertices:n,depth:r,rect:i},o,a,u,s){const c=a-o,f=s.smoothSide?1:2,l=c*f,d=s.smoothBevel?1:2,p=Math.min(r/2,s.bevelSize),m=s.bevelSegments,b=u.vertex,v=Math.max(i.width,i.height);if(p>0){const i=[0,0,1],a=[],s=[0,0,-1],g=[];let y=0,_=new Float32Array(c);for(let x=0;x<2;x++){const w=0===x?r-p:p;for(let r=0;r<=m*d;r++){let M,k,E=0;for(let S=0;S<c;S++){for(let b=0;b<f;b++){let f=2*((S+b)%c+o);a[0]=t[f]-n[f],a[1]=t[f+1]-n[f+1],a[2]=0;const y=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=y,a[1]/=y;const A=(Math.floor(r/d)+r%d)/m;0===x?h(g,i,a,A):h(g,a,s,A);const C=0===x?A:1-A,T=p*Math.sin(C*Math.PI/2),O=y*Math.cos(C*Math.PI/2),D=p*y/Math.sqrt(T*T+O*O),j=g[0]*D+n[f],L=g[1]*D+n[f+1],R=g[2]*D+w;if(e.position[3*u.vertex]=j,e.position[3*u.vertex+1]=L,e.position[3*u.vertex+2]=R,(S>0||b>0)&&(E+=Math.sqrt((M-j)*(M-j)+(k-L)*(k-L))),r>0||x>0){let t=3*(u.vertex-l),n=e.position[t],r=e.position[t+1],i=e.position[t+2];_[S]+=Math.sqrt((n-j)*(n-j)+(r-L)*(r-L)+(i-R)*(i-R))}e.uv[2*u.vertex]=E/v,e.uv[2*u.vertex+1]=_[S]/v,M=j,k=L,u.vertex++}if(d>1&&r%d||1===d&&r>=1)for(let t=0;t<6;t++){const n=(A[t][0]+S*f)%l,r=A[t][1]+y;e.indices[u.index++]=(r-1)*l+n+b}}y++}}}else for(let n=0;n<2;n++){const i=0===n?r-p:p;let a,s,l=0;for(let n=0;n<c;n++)for(let r=0;r<f;r++){const f=2*((n+r)%c+o),d=t[f],h=t[f+1];e.position[3*u.vertex]=d,e.position[3*u.vertex+1]=h,e.position[3*u.vertex+2]=i,(n>0||r>0)&&(l+=Math.sqrt((a-d)*(a-d)+(s-h)*(s-h))),e.uv[2*u.vertex]=l/v,e.uv[2*u.vertex+1]=i/v,a=d,s=h,u.vertex++}}const g=p>0?m*d+1:1;for(let t=0;t<c;t++)for(let n=0;n<6;n++){const r=(A[n][0]+t*f)%l,i=A[n][1]+g;e.indices[u.index++]=(i-1)*l+r+b}}function E({indices:e,vertices:t,topVertices:n,rect:r,depth:i},o,a,u){if(t.length<=4)return;const s=a.vertex,c=e.length;for(let t=0;t<c;t++)o.indices[a.index++]=s+e[t];const f=Math.max(r.width,r.height);for(let e=0;e<2;e++)for(let t=0;t<n.length;t+=2){const u=n[t],s=n[t+1];o.position[3*a.vertex]=u,o.position[3*a.vertex+1]=s,o.position[3*a.vertex+2]=(1-e)*i,o.uv[2*a.vertex]=(u-r.x)/f,o.uv[2*a.vertex+1]=(s-r.y)/f,a.vertex++}const l=t.length/2;for(let t=0;t<c;t+=3)for(let n=0;n<3;n++)o.indices[a.index++]=s+l+e[t+2-n]}function S(e,t){let n=0,r=0;for(let i=0;i<e.length;i++){const{indices:o,vertices:a,holes:u,depth:s}=e[i],c=a.length/2,f=Math.min(s/2,t.bevelSize)>0?t.bevelSegments:0;n+=2*o.length,r+=2*c;const l=2+2*f;let d=0,h=0;for(let e=0;e<(u?u.length:0)+1;e++){0===e?h=u&&u.length?u[0]:c:(d=u[e-1],h=u[e]||c),n+=6*(h-d)*(l-1);const i=(h-d)*(t.smoothSide?1:2);r+=i*l+(t.smoothBevel?0:f*i*2)}}const i={position:new Float32Array(3*r),indices:new(r>65535?Uint32Array:Uint16Array)(n),uv:new Float32Array(2*r)},o={vertex:0,index:0};for(let t=0;t<e.length;t++)E(e[t],i,o);for(let n=0;n<e.length;n++){const{holes:r,vertices:a}=e[n],u=a.length/2;let s=0,c=r&&r.length?r[0]:u;if(k(i,e[n],s,c,o,t),r)for(let a=0;a<r.length;a++)s=r[a],c=r[a+1]||u,k(i,e[n],s,c,o,t)}for(let e=0;e<i.uv.length;e++){const t=i.uv[e];t>0&&Math.round(t)===t?i.uv[e]=1:i.uv[e]=t%1}return i.normal=function(e,t){function n(e,t,n,r){e[0]=t,e[1]=n,e[2]=r}const r=[],i=[],o=[],a=[],u=[],s=[],c=e.length,d=new Float32Array(t.length);for(let l=0;l<c;){const c=3*e[l++],w=3*e[l++],M=3*e[l++];n(r,t[c],t[c+1],t[c+2]),n(i,t[w],t[w+1],t[w+2]),n(o,t[M],t[M+1],t[M+2]),f(a,r,i),f(u,i,o),h=s,m=u,b=(p=a)[0],v=p[1],g=p[2],y=m[0],_=m[1],x=m[2],h[0]=v*x-g*_,h[1]=g*y-b*x,h[2]=b*_-v*y;for(let e=0;e<3;e++)d[c+e]=d[c+e]+s[e],d[w+e]=d[w+e]+s[e],d[M+e]=d[M+e]+s[e]}for(var h,p,m,b,v,g,y,_,x,w=0;w<d.length;)n(s,d[w],d[w+1],d[w+2]),l(s,s),d[w++]=s[0],d[w++]=s[1],d[w++]=s[2];return d}(i.indices,i.position),i.boundingRect=e[0]&&e[0].rect,i}function C(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=[],a=i.length;let u=i[a-1][0],s=i[a-1][1],c=0;for(let e=0;e<a;e++){let n=i[e][0],r=i[e][1];const a=n-u,f=r-s;(c+=Math.sqrt(a*a+f*f))>t&&(o.push(i[e]),c=0),u=n,s=r}o.length>=3&&n.push(o)}return n.length>0?n:null}function T(e,t){t=Object.assign({},t);const n=[1/0,1/0],r=[-1/0,-1/0];for(let t=0;t<e.length;t++)O(e[t][0],n,r);t.boundingRect=t.boundingRect||{x:n[0],y:n[1],width:r[0]-n[0],height:r[1]-n[1]},M(t);const i=[],o=t.translate||[0,0],u=t.scale||[1,1],s=t.boundingRect,c={x:s.x*u[0]+o[0],y:s.y*u[1]+o[1],width:s.width*u[0],height:s.height*u[1]},f=Math.min(s.width,s.height)/1e5;for(let n=0;n<e.length;n++){const r=C(e[n],f);if(!r)continue;const{vertices:s,holes:l,dimensions:d}=a.a.flatten(r);for(let e=0;e<s.length;)s[e]=s[e++]*u[0]+o[0],s[e]=s[e++]*u[1]+o[1];if(w(s,l),2!==d)throw new Error("Only 2D polygon points are supported");const h=t.bevelSize>0?_(s,l,t.bevelSize,null,!0):s,p=m(h,l,d);i.push({indices:p,vertices:s,topVertices:h,holes:l,rect:c,depth:"function"==typeof t.depth?t.depth(n):t.depth})}return S(i,t)}function O(e,t,n){for(let r=0;r<e.length;r++)t[0]=Math.min(e[r][0],t[0]),t[1]=Math.min(e[r][1],t[1]),n[0]=Math.max(e[r][0],n[0]),n[1]=Math.max(e[r][1],n[1])}var D=n(4),j=n.n(D),L=n(2),R=n.n(L);function F(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,u=Math.round(e.h),s=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var f=e.hex.toString(16);f.length<6;)f="0"+f;return"#"+f}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+u+",s:"+s+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+u+",s:"+s+",v:"+c+",a:"+a+"}":"unknown format"}var P=Array.prototype.forEach,z=Array.prototype.slice,B={BREAK:{},extend:function(e){return this.each(z.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(z.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=z.call(arguments);return function(){for(var t=z.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(P&&e.forEach&&e.forEach===P)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;var a=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),a&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():z.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},I=[{litmus:B.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:F},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:F},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:F},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:F}}},{litmus:B.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:B.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:B.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(B.isNumber(e.r)&&B.isNumber(e.g)&&B.isNumber(e.b)&&B.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(B.isNumber(e.r)&&B.isNumber(e.g)&&B.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(B.isNumber(e.h)&&B.isNumber(e.s)&&B.isNumber(e.v)&&B.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(B.isNumber(e.h)&&B.isNumber(e.s)&&B.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],q=void 0,N=void 0,H=function(){N=!1;var e=arguments.length>1?B.toArray(arguments):arguments[0];return B.each(I,function(t){if(t.litmus(e))return B.each(t.conversions,function(t,n){if(q=t.read(e),!1===N&&!1!==q)return N=q,q.conversionName=n,q.conversion=t,B.BREAK}),B.BREAK}),N},V=void 0,U={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),u=n*(1-(1-i)*t),s=[[n,u,o],[a,n,o],[o,n,u],[o,a,n],[u,o,n],[n,o,a]][r];return{r:255*s[0],g:255*s[1],b:255*s[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(V=8*t)|e&~(255<<V)}},G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},X=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Q=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},K=function(){function e(){if(W(this,e),this.__state=H.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return X(e,[{key:"toString",value:function(){return F(this)}},{key:"toHexString",value:function(){return F(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function J(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(K.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(K.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function $(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(K.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(K.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}K.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=U.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");B.extend(e.__state,U.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},K.recalculateHSV=function(e){var t=U.rgb_to_hsv(e.r,e.g,e.b);B.extend(e.__state,{s:t.s,v:t.v}),B.isNaN(t.h)?B.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},K.COMPONENTS=["r","g","b","h","s","v","hex","a"],J(K.prototype,"r",2),J(K.prototype,"g",1),J(K.prototype,"b",0),$(K.prototype,"h"),$(K.prototype,"s"),$(K.prototype,"v"),Object.defineProperty(K.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(K.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=U.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var ee=function(){function e(t,n){W(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return X(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),te={};B.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){B.each(e,function(e){te[e]=t})});var ne=/(\d+(\.\d+)?)px/;function re(e){if("0"===e||B.isUndefined(e))return 0;var t=e.match(ne);return B.isNull(t)?0:parseFloat(t[1])}var ie={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;B.isUndefined(i)&&(i=!0),B.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=te[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,s=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,s,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;B.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}B.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),ie},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),ie},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return ie},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return ie},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return re(t["border-left-width"])+re(t["border-right-width"])+re(t["padding-left"])+re(t["padding-right"])+re(t.width)},getHeight:function(e){var t=getComputedStyle(e);return re(t["border-top-width"])+re(t["border-bottom-width"])+re(t["padding-top"])+re(t["padding-bottom"])+re(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},oe=function(e){function t(e,n){W(this,t);var r=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),ie.bind(r.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Q(t,ee),X(t,[{key:"setValue",value:function(e){var n=Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),ae=function(e){function t(e,n,r){W(this,t);var i=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),B.isArray(o)){var u={};B.each(o,function(e){u[e]=e}),o=u}return B.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),i.updateDisplay(),ie.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),i.domElement.appendChild(i.__select),i}return Q(t,ee),X(t,[{key:"setValue",value:function(e){var n=Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return ie.isActive(this.__select)?this:(this.__select.value=this.getValue(),Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),ue=function(e){function t(e,n){W(this,t);var r=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),ie.bind(r.__input,"keyup",o),ie.bind(r.__input,"change",o),ie.bind(r.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),ie.bind(r.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Q(t,ee),X(t,[{key:"updateDisplay",value:function(){return ie.isActive(this.__input)||(this.__input.value=this.getValue()),Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function se(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var ce=function(e){function t(e,n,r){W(this,t);var i=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,B.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=se(i.__impliedStep),i}return Q(t,ee),X(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=se(e),this}}]),t}();var fe=function(e){function t(e,n,r){W(this,t);var i=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function s(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function c(){ie.unbind(window,"mousemove",s),ie.unbind(window,"mouseup",c),u()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),ie.bind(i.__input,"change",function(){var e=parseFloat(o.__input.value);B.isNaN(e)||o.setValue(e)}),ie.bind(i.__input,"blur",function(){u()}),ie.bind(i.__input,"mousedown",function(e){ie.bind(window,"mousemove",s),ie.bind(window,"mouseup",c),a=e.clientY}),ie.bind(i.__input,"keydown",function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,u())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Q(t,ce),X(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function le(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var de=function(e){function t(e,n,r,i,o){W(this,t);var a=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),u=a;function s(e){e.preventDefault();var t=u.__background.getBoundingClientRect();return u.setValue(le(e.clientX,t.left,t.right,u.__min,u.__max)),!1}function c(){ie.unbind(window,"mousemove",s),ie.unbind(window,"mouseup",c),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function f(e){var t=e.touches[0].clientX,n=u.__background.getBoundingClientRect();u.setValue(le(t,n.left,n.right,u.__min,u.__max))}function l(){ie.unbind(window,"touchmove",f),ie.unbind(window,"touchend",l),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),ie.bind(a.__background,"mousedown",function(e){document.activeElement.blur(),ie.bind(window,"mousemove",s),ie.bind(window,"mouseup",c),s(e)}),ie.bind(a.__background,"touchstart",function(e){if(1!==e.touches.length)return;ie.bind(window,"touchmove",f),ie.bind(window,"touchend",l),f(e)}),ie.addClass(a.__background,"slider"),ie.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return Q(t,ce),X(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),he=function(e){function t(e,n,r){W(this,t);var i=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,ie.bind(i.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),ie.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return Q(t,ee),X(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),pe=function(e){function t(e,n){W(this,t);var r=Z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new K(r.getValue()),r.__temp=new K(0);var i=r;r.domElement=document.createElement("div"),ie.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",ie.bind(r.__input,"keydown",function(e){13===e.keyCode&&l.call(this)}),ie.bind(r.__input,"blur",l),ie.bind(r.__selector,"mousedown",function(){ie.addClass(this,"drag").bind(window,"mouseup",function(){ie.removeClass(i.__selector,"drag")})}),ie.bind(r.__selector,"touchstart",function(){ie.addClass(this,"drag").bind(window,"touchend",function(){ie.removeClass(i.__selector,"drag")})});var o,a=document.createElement("div");function u(e){h(e),ie.bind(window,"mousemove",h),ie.bind(window,"touchmove",h),ie.bind(window,"mouseup",c),ie.bind(window,"touchend",c)}function s(e){p(e),ie.bind(window,"mousemove",p),ie.bind(window,"touchmove",p),ie.bind(window,"mouseup",f),ie.bind(window,"touchend",f)}function c(){ie.unbind(window,"mousemove",h),ie.unbind(window,"touchmove",h),ie.unbind(window,"mouseup",c),ie.unbind(window,"touchend",c),d()}function f(){ie.unbind(window,"mousemove",p),ie.unbind(window,"touchmove",p),ie.unbind(window,"mouseup",f),ie.unbind(window,"touchend",f),d()}function l(){var e=H(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function h(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),u=1-(o-t.top)/(t.bottom-t.top);return u>1?u=1:u<0&&(u=0),a>1?a=1:a<0&&(a=0),i.__color.v=u,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return B.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),B.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),B.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),B.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),B.extend(a.style,{width:"100%",height:"100%",background:"none"}),be(a,"top","rgba(0,0,0,0)","#000"),B.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",B.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),ie.bind(r.__saturation_field,"mousedown",u),ie.bind(r.__saturation_field,"touchstart",u),ie.bind(r.__field_knob,"mousedown",u),ie.bind(r.__field_knob,"touchstart",u),ie.bind(r.__hue_field,"mousedown",s),ie.bind(r.__hue_field,"touchstart",s),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return Q(t,ee),X(t,[{key:"updateDisplay",value:function(){var e=H(this.getValue());if(!1!==e){var t=!1;B.each(K.COMPONENTS,function(n){if(!B.isUndefined(e[n])&&!B.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&B.extend(this.__color.__state,e)}B.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;B.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,be(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),B.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(),me=["-moz-","-o-","-webkit-","-ms-",""];function be(e,t,n,r){e.style.background="",B.each(me,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}var ve=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},ge=function(e,t){var n=e[t];return B.isArray(arguments[2])||B.isObject(arguments[2])?new ae(e,t,arguments[2]):B.isNumber(n)?B.isNumber(arguments[2])&&B.isNumber(arguments[3])?B.isNumber(arguments[4])?new de(e,t,arguments[2],arguments[3],arguments[4]):new de(e,t,arguments[2],arguments[3]):B.isNumber(arguments[4])?new fe(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new fe(e,t,{min:arguments[2],max:arguments[3]}):B.isString(n)?new ue(e,t):B.isFunction(n)?new he(e,t,""):B.isBoolean(n)?new oe(e,t):null};var ye=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},_e=function(){function e(){W(this,e),this.backgroundElement=document.createElement("div"),B.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),ie.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),B.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;ie.bind(this.backgroundElement,"click",function(){t.hide()})}return X(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),B.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",ie.unbind(e.domElement,"webkitTransitionEnd",t),ie.unbind(e.domElement,"transitionend",t),ie.unbind(e.domElement,"oTransitionEnd",t)};ie.bind(this.domElement,"webkitTransitionEnd",t),ie.bind(this.domElement,"transitionend",t),ie.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-ie.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-ie.getHeight(this.domElement)/2+"px"}}]),e}();ve(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var xe="Default",we=function(){try{return!!window.localStorage}catch(e){return!1}}(),Me=void 0,Ae=!0,ke=void 0,Ee=!1,Se=[],Ce=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),ie.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=B.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=B.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),B.isUndefined(r.load)?r.load={preset:xe}:r.preset&&(r.load.preset=r.preset),B.isUndefined(r.parent)&&r.hideable&&Se.push(this),r.resizable=B.isUndefined(r.parent)&&r.resizable,r.autoPlace&&B.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=we&&"true"===localStorage.getItem(Re(this,"isLocal")),a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,Be(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,titleRowName&&(titleRowName.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?ie.addClass(n.__ul,e.CLASS_CLOSED):ie.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){we&&(o=e,e?ie.bind(window,"unload",a):ie.unbind(window,"unload",a),localStorage.setItem(Re(n,"isLocal"),e))}}}),B.isUndefined(r.parent)){if(r.closed=!1,ie.addClass(this.domElement,e.CLASS_MAIN),ie.makeSelectable(this.domElement,!1),we&&o){n.useLocalStorage=!0;var u=localStorage.getItem(Re(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,ie.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(ie.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(ie.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),ie.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var s=document.createTextNode(r.name);ie.addClass(s,"controller-name");var c=Te(n,s);ie.addClass(this.__ul,e.CLASS_CLOSED),ie.addClass(c,"title"),ie.bind(c,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),r.closed||(this.closed=!1)}r.autoPlace&&(B.isUndefined(r.parent)&&(Ae&&(ke=document.createElement("div"),ie.addClass(ke,"dg"),ie.addClass(ke,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ke),Ae=!1),ke.appendChild(this.domElement),ie.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Be(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},ie.bind(window,"resize",this.__resizeHandler),ie.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),ie.bind(this.__ul,"transitionend",this.__resizeHandler),ie.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&ze(this),a=function(){we&&"true"===localStorage.getItem(Re(n,"isLocal"))&&localStorage.setItem(Re(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,B.defer(function(){i.width-=1}))};function Te(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function Oe(e){ie.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&ie.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function De(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function je(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[xe])return;a=o[xe]}if(a[r]&&void 0!==a[r][t.property]){var u=a[r][t.property];t.initialValue=u,t.setValue(u)}}}}function Le(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new pe(t,n);else{var o=[t,n].concat(r.factoryArgs);i=ge.apply(e,o)}r.before instanceof ee&&(r.before=r.before.__li),je(e,i),ie.addClass(i.domElement,"c");var a=document.createElement("span");ie.addClass(a,"property-name"),a.innerHTML=i.property;var u=document.createElement("div");u.appendChild(a),u.appendChild(i.domElement);var s=Te(e,u,r.before);return ie.addClass(s,Ce.CLASS_CONTROLLER_ROW),i instanceof pe?ie.addClass(s,"color"):ie.addClass(s,G(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,B.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),Le(e,n.object,n.property,{before:r,factoryArgs:[B.toArray(arguments)]})}if(B.isArray(t)||B.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),Le(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof de){var r=new fe(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});B.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}}),ie.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof fe){var i=function(t){if(B.isNumber(n.__min)&&B.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=Le(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=B.compose(i,n.min),n.max=B.compose(i,n.max)}else n instanceof oe?(ie.bind(t,"click",function(){ie.fakeEvent(n.__checkbox,"click")}),ie.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof he?(ie.bind(t,"click",function(){ie.fakeEvent(n.__button,"click")}),ie.bind(t,"mouseover",function(){ie.addClass(n.__button,"hover")}),ie.bind(t,"mouseout",function(){ie.removeClass(n.__button,"hover")})):n instanceof pe&&(ie.addClass(t,"color"),n.updateDisplay=B.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=B.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&De(e.getRoot(),!0),t},n.setValue)}(e,s,i),e.__controllers.push(i),i}function Re(e,t){return document.location.href+"."+t}function Fe(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Pe(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ze(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){ie.removeClass(e.__closeButton,Ce.CLASS_DRAG),ie.unbind(window,"mousemove",n),ie.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,ie.addClass(e.__closeButton,Ce.CLASS_DRAG),ie.bind(window,"mousemove",n),ie.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),B.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),ie.bind(e.__resize_handle,"mousedown",i),ie.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function Be(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Ie(e,t){var n={};return B.each(e.__rememberedObjects,function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];B.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}Ce.toggleHide=function(){Ee=!Ee,B.each(Se,function(e){e.domElement.style.display=Ee?"none":""})},Ce.CLASS_AUTO_PLACE="a",Ce.CLASS_AUTO_PLACE_CONTAINER="ac",Ce.CLASS_MAIN="main",Ce.CLASS_CONTROLLER_ROW="cr",Ce.CLASS_TOO_TALL="taller-than-window",Ce.CLASS_CLOSED="closed",Ce.CLASS_CLOSE_BUTTON="close-button",Ce.CLASS_CLOSE_TOP="close-top",Ce.CLASS_CLOSE_BOTTOM="close-bottom",Ce.CLASS_DRAG="drag",Ce.DEFAULT_WIDTH=245,Ce.TEXT_CLOSED="Close Controls",Ce.TEXT_OPEN="Open Controls",Ce._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Ce.toggleHide()},ie.bind(window,"keydown",Ce._keydownHandler,!1),B.extend(Ce.prototype,{add:function(e,t){return Le(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Le(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;B.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ke.removeChild(this.domElement);var e=this;B.each(this.__folders,function(t){e.removeFolder(t)}),ie.unbind(window,"keydown",Ce._keydownHandler,!1),Oe(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Ce(t);this.__folders[e]=n;var r=Te(this,n.domElement);return ie.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Oe(e);var t=this;B.each(e.__folders,function(t){e.removeFolder(t)}),B.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=ie.getOffset(e.__ul).top,n=0;B.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=ie.getHeight(t))}),window.innerHeight-t-20<n?(ie.addClass(e.domElement,Ce.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(ie.removeClass(e.domElement,Ce.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&B.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:B.debounce(function(){this.onResize()},50),remember:function(){if(B.isUndefined(Me)&&((Me=new _e).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;B.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");ie.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),ie.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",ie.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",ie.addClass(r,"button"),ie.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",ie.addClass(i,"button"),ie.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",ie.addClass(o,"button"),ie.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?B.each(e.load.remembered,function(t,n){Fe(e,n,n===e.preset)}):Fe(e,xe,!1);if(ie.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),we){var u=document.getElementById("dg-local-explain"),s=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block","true"===localStorage.getItem(Re(e,"isLocal"))&&s.setAttribute("checked","checked"),Pe(e,u),ie.bind(s,"change",function(){e.useLocalStorage=!e.useLocalStorage,Pe(e,u)})}var f=document.getElementById("dg-new-constructor");ie.bind(f,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Me.hide()}),ie.bind(n,"click",function(){f.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Me.show(),f.focus(),f.select()}),ie.bind(r,"click",function(){e.save()}),ie.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),ie.bind(o,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&Be(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Ie(this)),e.folders={},B.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ie(this),De(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[xe]=Ie(this,!0)),this.load.remembered[e]=Ie(this),this.preset=e,Fe(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){B.each(this.__controllers,function(t){this.getRoot().load.remembered?je(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),B.each(this.__folders,function(e){e.revert(e)}),e||De(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&ye.call(window,function(){e(t)});B.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){B.each(this.__controllers,function(e){e.updateDisplay()}),B.each(this.__folders,function(e){e.updateDisplay()})}});var qe=Ce;const Ne={bevelSize:.2,bevelSegments:2,smoothBevel:!1,n:5},He=document.createElement("canvas"),Ve=document.querySelector("#viewport");Ve.appendChild(He),He.width=Ve.clientWidth,He.height=Ve.clientHeight;const Ue=i()({canvas:He}),Ge=j()(He);Ge.lookAt([0,0,20],[0,0,0],[0,1,0]);const We=Ue.buffer([]),Xe=Ue.buffer([]),Ye=Ue.elements([]),Qe=Ue({vert:"\nprecision mediump float;\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projection, view, model;\n\nvarying vec3 vNormal;\n\nvoid main() {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n    vNormal = normal;\n}\n    ",frag:"\nprecision mediump float;\n\nvarying vec3 vNormal;\n\nvoid main() {\n    gl_FragColor = vec4(vNormal, 1.0);\n}\n    ",uniforms:{projection:({viewportWidth:e,viewportHeight:t})=>R.a.perspective([],Math.PI/4,e/t,.01,1e3),model:(e,t,n)=>R.a.identity([]),view:()=>Ge.view()},attributes:{position:We,normal:Xe},elements:Ye});function Ze(){const{position:e,indices:t,normal:n}=T([function(e){const t=[];function n(n){const r=n/2,i=Math.PI/e;let o=-Math.PI/2;const a=0+n*Math.cos(o),u=0+n*Math.sin(o);o+=i;const s=[[a,u]];for(let t,a=0,u=2*e-1;a<u;a++)t=a%2==0?r:n,s.push([0+t*Math.cos(o),0+t*Math.sin(o)]),o+=i;t.push(s)}return n(10),n(4),t}(Ne.n)],{depth:2,smoothBevel:Ne.smoothBevel,bevelSize:Ne.bevelSize,bevelSegments:Ne.bevelSegments});We({data:e}),Xe({data:n}),Ye({data:t})}Ze(),Ue.frame(e=>{Qe(),Ge.tick()});const Ke=new qe;Ke.add(Ne,"n",3,20).step(1).onChange(Ze),Ke.add(Ne,"bevelSize",0,1).onChange(Ze),Ke.add(Ne,"bevelSegments",0,10).step(1).onChange(Ze),Ke.add(Ne,"smoothBevel").onChange(Ze)},function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"EPSILON",function(){return h}),n.d(r,"ARRAY_TYPE",function(){return p}),n.d(r,"RANDOM",function(){return m}),n.d(r,"setMatrixArrayType",function(){return b}),n.d(r,"toRadian",function(){return g}),n.d(r,"equals",function(){return y});var i={};n.d(i,"create",function(){return _}),n.d(i,"clone",function(){return x}),n.d(i,"copy",function(){return w}),n.d(i,"identity",function(){return M}),n.d(i,"fromValues",function(){return A}),n.d(i,"set",function(){return k}),n.d(i,"transpose",function(){return E}),n.d(i,"invert",function(){return S}),n.d(i,"adjoint",function(){return C}),n.d(i,"determinant",function(){return T}),n.d(i,"multiply",function(){return O}),n.d(i,"rotate",function(){return D}),n.d(i,"scale",function(){return j}),n.d(i,"fromRotation",function(){return L}),n.d(i,"fromScaling",function(){return R}),n.d(i,"str",function(){return F}),n.d(i,"frob",function(){return P}),n.d(i,"LDU",function(){return z}),n.d(i,"add",function(){return B}),n.d(i,"subtract",function(){return I}),n.d(i,"exactEquals",function(){return q}),n.d(i,"equals",function(){return N}),n.d(i,"multiplyScalar",function(){return H}),n.d(i,"multiplyScalarAndAdd",function(){return V}),n.d(i,"mul",function(){return U}),n.d(i,"sub",function(){return G});var o={};n.d(o,"create",function(){return W}),n.d(o,"clone",function(){return X}),n.d(o,"copy",function(){return Y}),n.d(o,"identity",function(){return Q}),n.d(o,"fromValues",function(){return Z}),n.d(o,"set",function(){return K}),n.d(o,"invert",function(){return J}),n.d(o,"determinant",function(){return $}),n.d(o,"multiply",function(){return ee}),n.d(o,"rotate",function(){return te}),n.d(o,"scale",function(){return ne}),n.d(o,"translate",function(){return re}),n.d(o,"fromRotation",function(){return ie}),n.d(o,"fromScaling",function(){return oe}),n.d(o,"fromTranslation",function(){return ae}),n.d(o,"str",function(){return ue}),n.d(o,"frob",function(){return se}),n.d(o,"add",function(){return ce}),n.d(o,"subtract",function(){return fe}),n.d(o,"multiplyScalar",function(){return le}),n.d(o,"multiplyScalarAndAdd",function(){return de}),n.d(o,"exactEquals",function(){return he}),n.d(o,"equals",function(){return pe}),n.d(o,"mul",function(){return me}),n.d(o,"sub",function(){return be});var a={};n.d(a,"create",function(){return ve}),n.d(a,"fromMat4",function(){return ge}),n.d(a,"clone",function(){return ye}),n.d(a,"copy",function(){return _e}),n.d(a,"fromValues",function(){return xe}),n.d(a,"set",function(){return we}),n.d(a,"identity",function(){return Me}),n.d(a,"transpose",function(){return Ae}),n.d(a,"invert",function(){return ke}),n.d(a,"adjoint",function(){return Ee}),n.d(a,"determinant",function(){return Se}),n.d(a,"multiply",function(){return Ce}),n.d(a,"translate",function(){return Te}),n.d(a,"rotate",function(){return Oe}),n.d(a,"scale",function(){return De}),n.d(a,"fromTranslation",function(){return je}),n.d(a,"fromRotation",function(){return Le}),n.d(a,"fromScaling",function(){return Re}),n.d(a,"fromMat2d",function(){return Fe}),n.d(a,"fromQuat",function(){return Pe}),n.d(a,"normalFromMat4",function(){return ze}),n.d(a,"projection",function(){return Be}),n.d(a,"str",function(){return Ie}),n.d(a,"frob",function(){return qe}),n.d(a,"add",function(){return Ne}),n.d(a,"subtract",function(){return He}),n.d(a,"multiplyScalar",function(){return Ve}),n.d(a,"multiplyScalarAndAdd",function(){return Ue}),n.d(a,"exactEquals",function(){return Ge}),n.d(a,"equals",function(){return We}),n.d(a,"mul",function(){return Xe}),n.d(a,"sub",function(){return Ye});var u={};n.d(u,"create",function(){return Qe}),n.d(u,"clone",function(){return Ze}),n.d(u,"copy",function(){return Ke}),n.d(u,"fromValues",function(){return Je}),n.d(u,"set",function(){return $e}),n.d(u,"identity",function(){return et}),n.d(u,"transpose",function(){return tt}),n.d(u,"invert",function(){return nt}),n.d(u,"adjoint",function(){return rt}),n.d(u,"determinant",function(){return it}),n.d(u,"multiply",function(){return ot}),n.d(u,"translate",function(){return at}),n.d(u,"scale",function(){return ut}),n.d(u,"rotate",function(){return st}),n.d(u,"rotateX",function(){return ct}),n.d(u,"rotateY",function(){return ft}),n.d(u,"rotateZ",function(){return lt}),n.d(u,"fromTranslation",function(){return dt}),n.d(u,"fromScaling",function(){return ht}),n.d(u,"fromRotation",function(){return pt}),n.d(u,"fromXRotation",function(){return mt}),n.d(u,"fromYRotation",function(){return bt}),n.d(u,"fromZRotation",function(){return vt}),n.d(u,"fromRotationTranslation",function(){return gt}),n.d(u,"fromQuat2",function(){return yt}),n.d(u,"getTranslation",function(){return _t}),n.d(u,"getScaling",function(){return xt}),n.d(u,"getRotation",function(){return wt}),n.d(u,"fromRotationTranslationScale",function(){return Mt}),n.d(u,"fromRotationTranslationScaleOrigin",function(){return At}),n.d(u,"fromQuat",function(){return kt}),n.d(u,"frustum",function(){return Et}),n.d(u,"perspective",function(){return St}),n.d(u,"perspectiveFromFieldOfView",function(){return Ct}),n.d(u,"ortho",function(){return Tt}),n.d(u,"lookAt",function(){return Ot}),n.d(u,"targetTo",function(){return Dt}),n.d(u,"str",function(){return jt}),n.d(u,"frob",function(){return Lt}),n.d(u,"add",function(){return Rt}),n.d(u,"subtract",function(){return Ft}),n.d(u,"multiplyScalar",function(){return Pt}),n.d(u,"multiplyScalarAndAdd",function(){return zt}),n.d(u,"exactEquals",function(){return Bt}),n.d(u,"equals",function(){return It}),n.d(u,"mul",function(){return qt}),n.d(u,"sub",function(){return Nt});var s={};n.d(s,"create",function(){return Ht}),n.d(s,"clone",function(){return Vt}),n.d(s,"length",function(){return Ut}),n.d(s,"fromValues",function(){return Gt}),n.d(s,"copy",function(){return Wt}),n.d(s,"set",function(){return Xt}),n.d(s,"add",function(){return Yt}),n.d(s,"subtract",function(){return Qt}),n.d(s,"multiply",function(){return Zt}),n.d(s,"divide",function(){return Kt}),n.d(s,"ceil",function(){return Jt}),n.d(s,"floor",function(){return $t}),n.d(s,"min",function(){return en}),n.d(s,"max",function(){return tn}),n.d(s,"round",function(){return nn}),n.d(s,"scale",function(){return rn}),n.d(s,"scaleAndAdd",function(){return on}),n.d(s,"distance",function(){return an}),n.d(s,"squaredDistance",function(){return un}),n.d(s,"squaredLength",function(){return sn}),n.d(s,"negate",function(){return cn}),n.d(s,"inverse",function(){return fn}),n.d(s,"normalize",function(){return ln}),n.d(s,"dot",function(){return dn}),n.d(s,"cross",function(){return hn}),n.d(s,"lerp",function(){return pn}),n.d(s,"hermite",function(){return mn}),n.d(s,"bezier",function(){return bn}),n.d(s,"random",function(){return vn}),n.d(s,"transformMat4",function(){return gn}),n.d(s,"transformMat3",function(){return yn}),n.d(s,"transformQuat",function(){return _n}),n.d(s,"rotateX",function(){return xn}),n.d(s,"rotateY",function(){return wn}),n.d(s,"rotateZ",function(){return Mn}),n.d(s,"angle",function(){return An}),n.d(s,"str",function(){return kn}),n.d(s,"exactEquals",function(){return En}),n.d(s,"equals",function(){return Sn}),n.d(s,"sub",function(){return Cn}),n.d(s,"mul",function(){return Tn}),n.d(s,"div",function(){return On}),n.d(s,"dist",function(){return Dn}),n.d(s,"sqrDist",function(){return jn}),n.d(s,"len",function(){return Ln}),n.d(s,"sqrLen",function(){return Rn}),n.d(s,"forEach",function(){return Fn});var c={};n.d(c,"create",function(){return Pn}),n.d(c,"clone",function(){return zn}),n.d(c,"fromValues",function(){return Bn}),n.d(c,"copy",function(){return In}),n.d(c,"set",function(){return qn}),n.d(c,"add",function(){return Nn}),n.d(c,"subtract",function(){return Hn}),n.d(c,"multiply",function(){return Vn}),n.d(c,"divide",function(){return Un}),n.d(c,"ceil",function(){return Gn}),n.d(c,"floor",function(){return Wn}),n.d(c,"min",function(){return Xn}),n.d(c,"max",function(){return Yn}),n.d(c,"round",function(){return Qn}),n.d(c,"scale",function(){return Zn}),n.d(c,"scaleAndAdd",function(){return Kn}),n.d(c,"distance",function(){return Jn}),n.d(c,"squaredDistance",function(){return $n}),n.d(c,"length",function(){return er}),n.d(c,"squaredLength",function(){return tr}),n.d(c,"negate",function(){return nr}),n.d(c,"inverse",function(){return rr}),n.d(c,"normalize",function(){return ir}),n.d(c,"dot",function(){return or}),n.d(c,"lerp",function(){return ar}),n.d(c,"random",function(){return ur}),n.d(c,"transformMat4",function(){return sr}),n.d(c,"transformQuat",function(){return cr}),n.d(c,"str",function(){return fr}),n.d(c,"exactEquals",function(){return lr}),n.d(c,"equals",function(){return dr}),n.d(c,"sub",function(){return hr}),n.d(c,"mul",function(){return pr}),n.d(c,"div",function(){return mr}),n.d(c,"dist",function(){return br}),n.d(c,"sqrDist",function(){return vr}),n.d(c,"len",function(){return gr}),n.d(c,"sqrLen",function(){return yr}),n.d(c,"forEach",function(){return _r});var f={};n.d(f,"create",function(){return xr}),n.d(f,"identity",function(){return wr}),n.d(f,"setAxisAngle",function(){return Mr}),n.d(f,"getAxisAngle",function(){return Ar}),n.d(f,"multiply",function(){return kr}),n.d(f,"rotateX",function(){return Er}),n.d(f,"rotateY",function(){return Sr}),n.d(f,"rotateZ",function(){return Cr}),n.d(f,"calculateW",function(){return Tr}),n.d(f,"slerp",function(){return Or}),n.d(f,"random",function(){return Dr}),n.d(f,"invert",function(){return jr}),n.d(f,"conjugate",function(){return Lr}),n.d(f,"fromMat3",function(){return Rr}),n.d(f,"fromEuler",function(){return Fr}),n.d(f,"str",function(){return Pr}),n.d(f,"clone",function(){return zr}),n.d(f,"fromValues",function(){return Br}),n.d(f,"copy",function(){return Ir}),n.d(f,"set",function(){return qr}),n.d(f,"add",function(){return Nr}),n.d(f,"mul",function(){return Hr}),n.d(f,"scale",function(){return Vr}),n.d(f,"dot",function(){return Ur}),n.d(f,"lerp",function(){return Gr}),n.d(f,"length",function(){return Wr}),n.d(f,"len",function(){return Xr}),n.d(f,"squaredLength",function(){return Yr}),n.d(f,"sqrLen",function(){return Qr}),n.d(f,"normalize",function(){return Zr}),n.d(f,"exactEquals",function(){return Kr}),n.d(f,"equals",function(){return Jr}),n.d(f,"rotationTo",function(){return $r}),n.d(f,"sqlerp",function(){return ei}),n.d(f,"setAxes",function(){return ti});var l={};n.d(l,"create",function(){return ni}),n.d(l,"clone",function(){return ri}),n.d(l,"fromValues",function(){return ii}),n.d(l,"fromRotationTranslationValues",function(){return oi}),n.d(l,"fromRotationTranslation",function(){return ai}),n.d(l,"fromTranslation",function(){return ui}),n.d(l,"fromRotation",function(){return si}),n.d(l,"fromMat4",function(){return ci}),n.d(l,"copy",function(){return fi}),n.d(l,"identity",function(){return li}),n.d(l,"set",function(){return di}),n.d(l,"getReal",function(){return hi}),n.d(l,"getDual",function(){return pi}),n.d(l,"setReal",function(){return mi}),n.d(l,"setDual",function(){return bi}),n.d(l,"getTranslation",function(){return vi}),n.d(l,"translate",function(){return gi}),n.d(l,"rotateX",function(){return yi}),n.d(l,"rotateY",function(){return _i}),n.d(l,"rotateZ",function(){return xi}),n.d(l,"rotateByQuatAppend",function(){return wi}),n.d(l,"rotateByQuatPrepend",function(){return Mi}),n.d(l,"rotateAroundAxis",function(){return Ai}),n.d(l,"add",function(){return ki}),n.d(l,"multiply",function(){return Ei}),n.d(l,"mul",function(){return Si}),n.d(l,"scale",function(){return Ci}),n.d(l,"dot",function(){return Ti}),n.d(l,"lerp",function(){return Oi}),n.d(l,"invert",function(){return Di}),n.d(l,"conjugate",function(){return ji}),n.d(l,"length",function(){return Li}),n.d(l,"len",function(){return Ri}),n.d(l,"squaredLength",function(){return Fi}),n.d(l,"sqrLen",function(){return Pi}),n.d(l,"normalize",function(){return zi}),n.d(l,"str",function(){return Bi}),n.d(l,"exactEquals",function(){return Ii}),n.d(l,"equals",function(){return qi});var d={};n.d(d,"create",function(){return Ni}),n.d(d,"clone",function(){return Hi}),n.d(d,"fromValues",function(){return Vi}),n.d(d,"copy",function(){return Ui}),n.d(d,"set",function(){return Gi}),n.d(d,"add",function(){return Wi}),n.d(d,"subtract",function(){return Xi}),n.d(d,"multiply",function(){return Yi}),n.d(d,"divide",function(){return Qi}),n.d(d,"ceil",function(){return Zi}),n.d(d,"floor",function(){return Ki}),n.d(d,"min",function(){return Ji}),n.d(d,"max",function(){return $i}),n.d(d,"round",function(){return eo}),n.d(d,"scale",function(){return to}),n.d(d,"scaleAndAdd",function(){return no}),n.d(d,"distance",function(){return ro}),n.d(d,"squaredDistance",function(){return io}),n.d(d,"length",function(){return oo}),n.d(d,"squaredLength",function(){return ao}),n.d(d,"negate",function(){return uo}),n.d(d,"inverse",function(){return so}),n.d(d,"normalize",function(){return co}),n.d(d,"dot",function(){return fo}),n.d(d,"cross",function(){return lo}),n.d(d,"lerp",function(){return ho}),n.d(d,"random",function(){return po}),n.d(d,"transformMat2",function(){return mo}),n.d(d,"transformMat2d",function(){return bo}),n.d(d,"transformMat3",function(){return vo}),n.d(d,"transformMat4",function(){return go}),n.d(d,"rotate",function(){return yo}),n.d(d,"angle",function(){return _o}),n.d(d,"str",function(){return xo}),n.d(d,"exactEquals",function(){return wo}),n.d(d,"equals",function(){return Mo}),n.d(d,"len",function(){return Ao}),n.d(d,"sub",function(){return ko}),n.d(d,"mul",function(){return Eo}),n.d(d,"div",function(){return So}),n.d(d,"dist",function(){return Co}),n.d(d,"sqrDist",function(){return To}),n.d(d,"sqrLen",function(){return Oo}),n.d(d,"forEach",function(){return Do});const h=1e-6;let p="undefined"!=typeof Float32Array?Float32Array:Array;const m=Math.random;function b(e){p=e}const v=Math.PI/180;function g(e){return e*v}function y(e,t){return Math.abs(e-t)<=h*Math.max(1,Math.abs(e),Math.abs(t))}function _(){let e=new p(4);return p!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function x(e){let t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function M(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function A(e,t,n,r){let i=new p(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function k(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function E(e,t){if(e===t){let n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function S(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function C(e,t){let n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function T(e){return e[0]*e[3]-e[2]*e[1]}function O(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=n[0],s=n[1],c=n[2],f=n[3];return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*c+o*f,e[3]=i*c+a*f,e}function D(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=i*s+a*u,e[2]=r*-u+o*s,e[3]=i*-u+a*s,e}function j(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=i*u,e[2]=o*s,e[3]=a*s,e}function L(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function R(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function F(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function P(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function z(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function B(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function I(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function N(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=h*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=h*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}function H(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function V(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}const U=O,G=I;function W(){let e=new p(6);return p!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function X(e){let t=new p(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Q(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Z(e,t,n,r,i,o){let a=new p(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function K(e,t,n,r,i,o,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e}function J(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=n*o-r*i;return s?(s=1/s,e[0]=o*s,e[1]=-r*s,e[2]=-i*s,e[3]=n*s,e[4]=(i*u-o*a)*s,e[5]=(r*a-n*u)*s,e):null}function $(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=n[0],f=n[1],l=n[2],d=n[3],h=n[4],p=n[5];return e[0]=r*c+o*f,e[1]=i*c+a*f,e[2]=r*l+o*d,e[3]=i*l+a*d,e[4]=r*h+o*p+u,e[5]=i*h+a*p+s,e}function te(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=Math.sin(n),f=Math.cos(n);return e[0]=r*f+o*c,e[1]=i*f+a*c,e[2]=r*-c+o*f,e[3]=i*-c+a*f,e[4]=u,e[5]=s,e}function ne(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=n[0],f=n[1];return e[0]=r*c,e[1]=i*c,e[2]=o*f,e[3]=a*f,e[4]=u,e[5]=s,e}function re(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*c+o*f+u,e[5]=i*c+a*f+s,e}function ie(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function ae(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function ue(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function se(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function ce(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function fe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function le(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function de(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function he(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pe(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=t[0],c=t[1],f=t[2],l=t[3],d=t[4],p=t[5];return Math.abs(n-s)<=h*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=h*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=h*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=h*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-d)<=h*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-p)<=h*Math.max(1,Math.abs(u),Math.abs(p))}const me=ee,be=fe;function ve(){let e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ge(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ye(e){let t=new p(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xe(e,t,n,r,i,o,a,u,s){let c=new p(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=u,c[8]=s,c}function we(e,t,n,r,i,o,a,u,s,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=s,e[8]=c,e}function Me(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ae(e,t){if(e===t){let n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function ke(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=f*a-u*c,d=-f*o+u*s,h=c*o-a*s,p=n*l+r*d+i*h;return p?(p=1/p,e[0]=l*p,e[1]=(-f*r+i*c)*p,e[2]=(u*r-i*a)*p,e[3]=d*p,e[4]=(f*n-i*s)*p,e[5]=(-u*n+i*o)*p,e[6]=h*p,e[7]=(-c*n+r*s)*p,e[8]=(a*n-r*o)*p,e):null}function Ee(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8];return e[0]=a*f-u*c,e[1]=i*c-r*f,e[2]=r*u-i*a,e[3]=u*s-o*f,e[4]=n*f-i*s,e[5]=i*o-n*u,e[6]=o*c-a*s,e[7]=r*s-n*c,e[8]=n*a-r*o,e}function Se(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],c=e[8];return t*(c*o-a*s)+n*(-c*i+a*u)+r*(s*i-o*u)}function Ce(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=n[0],h=n[1],p=n[2],m=n[3],b=n[4],v=n[5],g=n[6],y=n[7],_=n[8];return e[0]=d*r+h*a+p*c,e[1]=d*i+h*u+p*f,e[2]=d*o+h*s+p*l,e[3]=m*r+b*a+v*c,e[4]=m*i+b*u+v*f,e[5]=m*o+b*s+v*l,e[6]=g*r+y*a+_*c,e[7]=g*i+y*u+_*f,e[8]=g*o+y*s+_*l,e}function Te(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=n[0],h=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=d*r+h*a+c,e[7]=d*i+h*u+f,e[8]=d*o+h*s+l,e}function Oe(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=Math.sin(n),h=Math.cos(n);return e[0]=h*r+d*a,e[1]=h*i+d*u,e[2]=h*o+d*s,e[3]=h*a-d*r,e[4]=h*u-d*i,e[5]=h*s-d*o,e[6]=c,e[7]=f,e[8]=l,e}function De(e,t,n){let r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function je(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Le(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Re(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Fe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Pe(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,d=i*a,h=i*u,p=i*s,m=o*a,b=o*u,v=o*s;return e[0]=1-l-p,e[3]=f-v,e[6]=d+b,e[1]=f+v,e[4]=1-c-p,e[7]=h-m,e[2]=d-b,e[5]=h+m,e[8]=1-c-l,e}function ze(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],v=t[15],g=n*u-r*a,y=n*s-i*a,_=n*c-o*a,x=r*s-i*u,w=r*c-o*u,M=i*c-o*s,A=f*m-l*p,k=f*b-d*p,E=f*v-h*p,S=l*b-d*m,C=l*v-h*m,T=d*v-h*b,O=g*T-y*C+_*S+x*E-w*k+M*A;return O?(O=1/O,e[0]=(u*T-s*C+c*S)*O,e[1]=(s*E-a*T-c*k)*O,e[2]=(a*C-u*E+c*A)*O,e[3]=(i*C-r*T-o*S)*O,e[4]=(n*T-i*E+o*k)*O,e[5]=(r*E-n*C-o*A)*O,e[6]=(m*M-b*w+v*x)*O,e[7]=(b*_-p*M-v*y)*O,e[8]=(p*w-m*_+v*g)*O,e):null}function Be(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ie(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function qe(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function Ne(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function He(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Ve(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Ue(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Ge(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function We(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=t[0],d=t[1],p=t[2],m=t[3],b=t[4],v=t[5],g=t[6],y=t[7],_=t[8];return Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-d)<=h*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-p)<=h*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=h*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-b)<=h*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(u-v)<=h*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-g)<=h*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-y)<=h*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-_)<=h*Math.max(1,Math.abs(f),Math.abs(_))}const Xe=Ce,Ye=He;function Qe(){let e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ze(e){let t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Je(e,t,n,r,i,o,a,u,s,c,f,l,d,h,m,b){let v=new p(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=u,v[8]=s,v[9]=c,v[10]=f,v[11]=l,v[12]=d,v[13]=h,v[14]=m,v[15]=b,v}function $e(e,t,n,r,i,o,a,u,s,c,f,l,d,h,p,m,b){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=s,e[8]=c,e[9]=f,e[10]=l,e[11]=d,e[12]=h,e[13]=p,e[14]=m,e[15]=b,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){let n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nt(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],v=t[15],g=n*u-r*a,y=n*s-i*a,_=n*c-o*a,x=r*s-i*u,w=r*c-o*u,M=i*c-o*s,A=f*m-l*p,k=f*b-d*p,E=f*v-h*p,S=l*b-d*m,C=l*v-h*m,T=d*v-h*b,O=g*T-y*C+_*S+x*E-w*k+M*A;return O?(O=1/O,e[0]=(u*T-s*C+c*S)*O,e[1]=(i*C-r*T-o*S)*O,e[2]=(m*M-b*w+v*x)*O,e[3]=(d*w-l*M-h*x)*O,e[4]=(s*E-a*T-c*k)*O,e[5]=(n*T-i*E+o*k)*O,e[6]=(b*_-p*M-v*y)*O,e[7]=(f*M-d*_+h*y)*O,e[8]=(a*C-u*E+c*A)*O,e[9]=(r*E-n*C-o*A)*O,e[10]=(p*w-m*_+v*g)*O,e[11]=(l*_-f*w-h*g)*O,e[12]=(u*k-a*S-s*A)*O,e[13]=(n*S-r*k+i*A)*O,e[14]=(m*y-p*x-b*g)*O,e[15]=(f*x-l*y+d*g)*O,e):null}function rt(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],v=t[15];return e[0]=u*(d*v-h*b)-l*(s*v-c*b)+m*(s*h-c*d),e[1]=-(r*(d*v-h*b)-l*(i*v-o*b)+m*(i*h-o*d)),e[2]=r*(s*v-c*b)-u*(i*v-o*b)+m*(i*c-o*s),e[3]=-(r*(s*h-c*d)-u*(i*h-o*d)+l*(i*c-o*s)),e[4]=-(a*(d*v-h*b)-f*(s*v-c*b)+p*(s*h-c*d)),e[5]=n*(d*v-h*b)-f*(i*v-o*b)+p*(i*h-o*d),e[6]=-(n*(s*v-c*b)-a*(i*v-o*b)+p*(i*c-o*s)),e[7]=n*(s*h-c*d)-a*(i*h-o*d)+f*(i*c-o*s),e[8]=a*(l*v-h*m)-f*(u*v-c*m)+p*(u*h-c*l),e[9]=-(n*(l*v-h*m)-f*(r*v-o*m)+p*(r*h-o*l)),e[10]=n*(u*v-c*m)-a*(r*v-o*m)+p*(r*c-o*u),e[11]=-(n*(u*h-c*l)-a*(r*h-o*l)+f*(r*c-o*u)),e[12]=-(a*(l*b-d*m)-f*(u*b-s*m)+p*(u*d-s*l)),e[13]=n*(l*b-d*m)-f*(r*b-i*m)+p*(r*d-i*l),e[14]=-(n*(u*b-s*m)-a*(r*b-i*m)+p*(r*s-i*u)),e[15]=n*(u*d-s*l)-a*(r*d-i*l)+f*(r*s-i*u),e}function it(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15];return(t*a-n*o)*(l*b-d*m)-(t*u-r*o)*(f*b-d*p)+(t*s-i*o)*(f*m-l*p)+(n*u-r*a)*(c*b-d*h)-(n*s-i*a)*(c*m-l*h)+(r*s-i*u)*(c*p-f*h)}function ot(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],v=t[14],g=t[15],y=n[0],_=n[1],x=n[2],w=n[3];return e[0]=y*r+_*u+x*l+w*m,e[1]=y*i+_*s+x*d+w*b,e[2]=y*o+_*c+x*h+w*v,e[3]=y*a+_*f+x*p+w*g,y=n[4],_=n[5],x=n[6],w=n[7],e[4]=y*r+_*u+x*l+w*m,e[5]=y*i+_*s+x*d+w*b,e[6]=y*o+_*c+x*h+w*v,e[7]=y*a+_*f+x*p+w*g,y=n[8],_=n[9],x=n[10],w=n[11],e[8]=y*r+_*u+x*l+w*m,e[9]=y*i+_*s+x*d+w*b,e[10]=y*o+_*c+x*h+w*v,e[11]=y*a+_*f+x*p+w*g,y=n[12],_=n[13],x=n[14],w=n[15],e[12]=y*r+_*u+x*l+w*m,e[13]=y*i+_*s+x*d+w*b,e[14]=y*o+_*c+x*h+w*v,e[15]=y*a+_*f+x*p+w*g,e}function at(e,t,n){let r,i,o,a,u,s,c,f,l,d,h,p,m=n[0],b=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*b+t[8]*v+t[12],e[13]=t[1]*m+t[5]*b+t[9]*v+t[13],e[14]=t[2]*m+t[6]*b+t[10]*v+t[14],e[15]=t[3]*m+t[7]*b+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=c,e[7]=f,e[8]=l,e[9]=d,e[10]=h,e[11]=p,e[12]=r*m+u*b+l*v+t[12],e[13]=i*m+s*b+d*v+t[13],e[14]=o*m+c*b+h*v+t[14],e[15]=a*m+f*b+p*v+t[15]),e}function ut(e,t,n){let r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function st(e,t,n,r){let i,o,a,u,s,c,f,l,d,p,m,b,v,g,y,_,x,w,M,A,k,E,S,C,T=r[0],O=r[1],D=r[2],j=Math.sqrt(T*T+O*O+D*D);return j<h?null:(T*=j=1/j,O*=j,D*=j,i=Math.sin(n),a=1-(o=Math.cos(n)),u=t[0],s=t[1],c=t[2],f=t[3],l=t[4],d=t[5],p=t[6],m=t[7],b=t[8],v=t[9],g=t[10],y=t[11],_=T*T*a+o,x=O*T*a+D*i,w=D*T*a-O*i,M=T*O*a-D*i,A=O*O*a+o,k=D*O*a+T*i,E=T*D*a+O*i,S=O*D*a-T*i,C=D*D*a+o,e[0]=u*_+l*x+b*w,e[1]=s*_+d*x+v*w,e[2]=c*_+p*x+g*w,e[3]=f*_+m*x+y*w,e[4]=u*M+l*A+b*k,e[5]=s*M+d*A+v*k,e[6]=c*M+p*A+g*k,e[7]=f*M+m*A+y*k,e[8]=u*E+l*S+b*C,e[9]=s*E+d*S+v*C,e[10]=c*E+p*S+g*C,e[11]=f*E+m*S+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ct(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+f*r,e[6]=u*i+l*r,e[7]=s*i+d*r,e[8]=c*i-o*r,e[9]=f*i-a*r,e[10]=l*i-u*r,e[11]=d*i-s*r,e}function ft(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],c=t[8],f=t[9],l=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-f*r,e[2]=u*i-l*r,e[3]=s*i-d*r,e[8]=o*r+c*i,e[9]=a*r+f*i,e[10]=u*r+l*i,e[11]=s*r+d*i,e}function lt(e,t,n){let r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],c=t[4],f=t[5],l=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+f*r,e[2]=u*i+l*r,e[3]=s*i+d*r,e[4]=c*i-o*r,e[5]=f*i-a*r,e[6]=l*i-u*r,e[7]=d*i-s*r,e}function dt(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ht(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t,n){let r,i,o,a=n[0],u=n[1],s=n[2],c=Math.sqrt(a*a+u*u+s*s);return c<h?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=u*a*o+s*r,e[2]=s*a*o-u*r,e[3]=0,e[4]=a*u*o-s*r,e[5]=u*u*o+i,e[6]=s*u*o+a*r,e[7]=0,e[8]=a*s*o+u*r,e[9]=u*s*o-a*r,e[10]=s*s*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mt(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vt(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gt(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=r+r,s=i+i,c=o+o,f=r*u,l=r*s,d=r*c,h=i*s,p=i*c,m=o*c,b=a*u,v=a*s,g=a*c;return e[0]=1-(h+m),e[1]=l+g,e[2]=d-v,e[3]=0,e[4]=l-g,e[5]=1-(f+m),e[6]=p+b,e[7]=0,e[8]=d+v,e[9]=p-b,e[10]=1-(f+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function yt(e,t){let n=new p(3),r=-t[0],i=-t[1],o=-t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=r*r+i*i+o*o+a*a;return l>0?(n[0]=2*(u*a+f*r+s*o-c*i)/l,n[1]=2*(s*a+f*i+c*r-u*o)/l,n[2]=2*(c*a+f*o+u*i-s*r)/l):(n[0]=2*(u*a+f*r+s*o-c*i),n[1]=2*(s*a+f*i+c*r-u*o),n[2]=2*(c*a+f*o+u*i-s*r)),gt(e,t,n),e}function _t(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function xt(e,t){let n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],u=t[6],s=t[8],c=t[9],f=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(o*o+a*a+u*u),e[2]=Math.sqrt(s*s+c*c+f*f),e}function wt(e,t){let n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Mt(e,t,n,r){let i=t[0],o=t[1],a=t[2],u=t[3],s=i+i,c=o+o,f=a+a,l=i*s,d=i*c,h=i*f,p=o*c,m=o*f,b=a*f,v=u*s,g=u*c,y=u*f,_=r[0],x=r[1],w=r[2];return e[0]=(1-(p+b))*_,e[1]=(d+y)*_,e[2]=(h-g)*_,e[3]=0,e[4]=(d-y)*x,e[5]=(1-(l+b))*x,e[6]=(m+v)*x,e[7]=0,e[8]=(h+g)*w,e[9]=(m-v)*w,e[10]=(1-(l+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function At(e,t,n,r,i){let o=t[0],a=t[1],u=t[2],s=t[3],c=o+o,f=a+a,l=u+u,d=o*c,h=o*f,p=o*l,m=a*f,b=a*l,v=u*l,g=s*c,y=s*f,_=s*l,x=r[0],w=r[1],M=r[2],A=i[0],k=i[1],E=i[2],S=(1-(m+v))*x,C=(h+_)*x,T=(p-y)*x,O=(h-_)*w,D=(1-(d+v))*w,j=(b+g)*w,L=(p+y)*M,R=(b-g)*M,F=(1-(d+m))*M;return e[0]=S,e[1]=C,e[2]=T,e[3]=0,e[4]=O,e[5]=D,e[6]=j,e[7]=0,e[8]=L,e[9]=R,e[10]=F,e[11]=0,e[12]=n[0]+A-(S*A+O*k+L*E),e[13]=n[1]+k-(C*A+D*k+R*E),e[14]=n[2]+E-(T*A+j*k+F*E),e[15]=1,e}function kt(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,d=i*a,h=i*u,p=i*s,m=o*a,b=o*u,v=o*s;return e[0]=1-l-p,e[1]=f+v,e[2]=d-b,e[3]=0,e[4]=f-v,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=d+b,e[9]=h-m,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Et(e,t,n,r,i,o,a){let u=1/(n-t),s=1/(i-r),c=1/(o-a);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*s,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function St(e,t,n,r,i){let o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Ct(e,t,n,r){let i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(i+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Tt(e,t,n,r,i,o,a){let u=1/(t-n),s=1/(r-i),c=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*s,e[14]=(a+o)*c,e[15]=1,e}function Ot(e,t,n,r){let i,o,a,u,s,c,f,l,d,p,m=t[0],b=t[1],v=t[2],g=r[0],y=r[1],_=r[2],x=n[0],w=n[1],M=n[2];return Math.abs(m-x)<h&&Math.abs(b-w)<h&&Math.abs(v-M)<h?et(e):(f=m-x,l=b-w,d=v-M,i=y*(d*=p=1/Math.sqrt(f*f+l*l+d*d))-_*(l*=p),o=_*(f*=p)-g*d,a=g*l-y*f,(p=Math.sqrt(i*i+o*o+a*a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),u=l*a-d*o,s=d*i-f*a,c=f*o-l*i,(p=Math.sqrt(u*u+s*s+c*c))?(u*=p=1/p,s*=p,c*=p):(u=0,s=0,c=0),e[0]=i,e[1]=u,e[2]=f,e[3]=0,e[4]=o,e[5]=s,e[6]=l,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*m+o*b+a*v),e[13]=-(u*m+s*b+c*v),e[14]=-(f*m+l*b+d*v),e[15]=1,e)}function Dt(e,t,n,r){let i=t[0],o=t[1],a=t[2],u=r[0],s=r[1],c=r[2],f=i-n[0],l=o-n[1],d=a-n[2],h=f*f+l*l+d*d;h>0&&(f*=h=1/Math.sqrt(h),l*=h,d*=h);let p=s*d-c*l,m=c*f-u*d,b=u*l-s*f;return(h=p*p+m*m+b*b)>0&&(p*=h=1/Math.sqrt(h),m*=h,b*=h),e[0]=p,e[1]=m,e[2]=b,e[3]=0,e[4]=l*b-d*m,e[5]=d*p-f*b,e[6]=f*m-l*p,e[7]=0,e[8]=f,e[9]=l,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function jt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Lt(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function Rt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Ft(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Pt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function zt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Bt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function It(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],d=e[10],p=e[11],m=e[12],b=e[13],v=e[14],g=e[15],y=t[0],_=t[1],x=t[2],w=t[3],M=t[4],A=t[5],k=t[6],E=t[7],S=t[8],C=t[9],T=t[10],O=t[11],D=t[12],j=t[13],L=t[14],R=t[15];return Math.abs(n-y)<=h*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=h*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-x)<=h*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=h*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-M)<=h*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-A)<=h*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(s-k)<=h*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(c-E)<=h*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-S)<=h*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(l-C)<=h*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(d-T)<=h*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-O)<=h*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-D)<=h*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(b-j)<=h*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(v-L)<=h*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(g-R)<=h*Math.max(1,Math.abs(g),Math.abs(R))}const qt=ot,Nt=Ft;function Ht(){let e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Vt(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ut(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Gt(e,t,n){let r=new p(3);return r[0]=e,r[1]=t,r[2]=n,r}function Wt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Yt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Qt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Zt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Kt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Jt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function $t(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function en(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function tn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function nn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function rn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function on(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function an(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function un(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function sn(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function cn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function fn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ln(e,t){let n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function dn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hn(e,t,n){let r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2];return e[0]=i*s-o*u,e[1]=o*a-r*s,e[2]=r*u-i*a,e}function pn(e,t,n,r){let i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function mn(e,t,n,r,i,o){let a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return e[0]=t[0]*u+n[0]*s+r[0]*c+i[0]*f,e[1]=t[1]*u+n[1]*s+r[1]*c+i[1]*f,e[2]=t[2]*u+n[2]*s+r[2]*c+i[2]*f,e}function bn(e,t,n,r,i,o){let a=1-o,u=a*a,s=o*o,c=u*a,f=3*o*u,l=3*s*a,d=s*o;return e[0]=t[0]*c+n[0]*f+r[0]*l+i[0]*d,e[1]=t[1]*c+n[1]*f+r[1]*l+i[1]*d,e[2]=t[2]*c+n[2]*f+r[2]*l+i[2]*d,e}function vn(e,t){t=t||1;let n=2*m()*Math.PI,r=2*m()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function gn(e,t,n){let r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function yn(e,t,n){let r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function _n(e,t,n){let r=n[0],i=n[1],o=n[2],a=n[3],u=t[0],s=t[1],c=t[2],f=i*c-o*s,l=o*u-r*c,d=r*s-i*u,h=i*d-o*l,p=o*f-r*d,m=r*l-i*f,b=2*a;return f*=b,l*=b,d*=b,h*=2,p*=2,m*=2,e[0]=u+f+h,e[1]=s+l+p,e[2]=c+d+m,e}function xn(e,t,n,r){let i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function wn(e,t,n,r){let i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function Mn(e,t,n,r){let i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function An(e,t){let n=Gt(e[0],e[1],e[2]),r=Gt(t[0],t[1],t[2]);ln(n,n),ln(r,r);let i=dn(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function kn(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function En(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Sn(e,t){let n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],u=t[2];return Math.abs(n-o)<=h*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=h*Math.max(1,Math.abs(i),Math.abs(u))}const Cn=Qt,Tn=Zt,On=Kt,Dn=an,jn=un,Ln=Ut,Rn=sn,Fn=function(){let e=Ht();return function(t,n,r,i,o,a){let u,s;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],o(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}();function Pn(){let e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function zn(e){let t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Bn(e,t,n,r){let i=new p(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function In(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function qn(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Nn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Hn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Vn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Un(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Gn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Wn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Xn(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Yn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Qn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Zn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Kn(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function Jn(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function $n(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function er(e){let t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function tr(e){let t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function nr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function rr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function ir(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}function or(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ar(e,t,n,r){let i=t[0],o=t[1],a=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=u+r*(n[3]-u),e}function ur(e,t){var n,r,i,o,a,u;t=t||1;do{a=(n=2*m()-1)*n+(r=2*m()-1)*r}while(a>=1);do{u=(i=2*m()-1)*i+(o=2*m()-1)*o}while(u>=1);var s=Math.sqrt((1-a)/u);return e[0]=t*n,e[1]=t*r,e[2]=t*i*s,e[3]=t*o*s,e}function sr(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function cr(e,t,n){let r=t[0],i=t[1],o=t[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*o-s*i,l=c*i+s*r-a*o,d=c*o+a*i-u*r,h=-a*r-u*i-s*o;return e[0]=f*c+h*-a+l*-s-d*-u,e[1]=l*c+h*-u+d*-a-f*-s,e[2]=d*c+h*-s+f*-u-l*-a,e[3]=t[3],e}function fr(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function lr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function dr(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=h*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=h*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}const hr=Hn,pr=Vn,mr=Un,br=Jn,vr=$n,gr=er,yr=tr,_r=function(){let e=Pn();return function(t,n,r,i,o,a){let u,s;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],o(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}();function xr(){let e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function wr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Mr(e,t,n){n*=.5;let r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Ar(e,t){let n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>h?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function kr(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=n[0],s=n[1],c=n[2],f=n[3];return e[0]=r*f+a*u+i*c-o*s,e[1]=i*f+a*s+o*u-r*c,e[2]=o*f+a*c+r*s-i*u,e[3]=a*f-r*u-i*s-o*c,e}function Er(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=o*s-i*u,e[3]=a*s-r*u,e}function Sr(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-o*u,e[1]=i*s+a*u,e[2]=o*s+r*u,e[3]=a*s-i*u,e}function Cr(e,t,n){n*=.5;let r=t[0],i=t[1],o=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=i*s-r*u,e[2]=o*s+a*u,e[3]=a*s-o*u,e}function Tr(e,t){let n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Or(e,t,n,r){let i,o,a,u,s,c=t[0],f=t[1],l=t[2],d=t[3],p=n[0],m=n[1],b=n[2],v=n[3];return(o=c*p+f*m+l*b+d*v)<0&&(o=-o,p=-p,m=-m,b=-b,v=-v),1-o>h?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-r)*i)/a,s=Math.sin(r*i)/a):(u=1-r,s=r),e[0]=u*c+s*p,e[1]=u*f+s*m,e[2]=u*l+s*b,e[3]=u*d+s*v,e}function Dr(e){let t=m(),n=m(),r=m(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e}function jr(e,t){let n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,u=a?1/a:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=o*u,e}function Lr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Rr(e,t){let n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*o+o]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+o]-t[3*o+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[o]=(t[3*o+r]+t[3*r+o])*n}return e}function Fr(e,t,n,r){let i=.5*Math.PI/180;t*=i,n*=i,r*=i;let o=Math.sin(t),a=Math.cos(t),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return e[0]=o*s*f-a*u*c,e[1]=a*u*f+o*s*c,e[2]=a*s*c-o*u*f,e[3]=a*s*f+o*u*c,e}function Pr(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const zr=zn,Br=Bn,Ir=In,qr=qn,Nr=Nn,Hr=kr,Vr=Zn,Ur=or,Gr=ar,Wr=er,Xr=Wr,Yr=tr,Qr=Yr,Zr=ir,Kr=lr,Jr=dr,$r=function(){let e=Ht(),t=Gt(1,0,0),n=Gt(0,1,0);return function(r,i,o){let a=dn(i,o);return a<-.999999?(hn(e,t,i),Ln(e)<1e-6&&hn(e,n,i),ln(e,e),Mr(r,e,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(hn(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+a,Zr(r,r))}}(),ei=function(){let e=xr(),t=xr();return function(n,r,i,o,a,u){return Or(e,r,a,u),Or(t,i,o,u),Or(n,e,t,2*u*(1-u)),n}}(),ti=function(){let e=ve();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Zr(t,Rr(t,e))}}();function ni(){let e=new p(8);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ri(e){let t=new p(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function ii(e,t,n,r,i,o,a,u){let s=new p(8);return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s[6]=a,s[7]=u,s}function oi(e,t,n,r,i,o,a){let u=new p(8);u[0]=e,u[1]=t,u[2]=n,u[3]=r;let s=.5*i,c=.5*o,f=.5*a;return u[4]=s*r+c*n-f*t,u[5]=c*r+f*e-s*n,u[6]=f*r+s*t-c*e,u[7]=-s*e-c*t-f*n,u}function ai(e,t,n){let r=.5*n[0],i=.5*n[1],o=.5*n[2],a=t[0],u=t[1],s=t[2],c=t[3];return e[0]=a,e[1]=u,e[2]=s,e[3]=c,e[4]=r*c+i*s-o*u,e[5]=i*c+o*a-r*s,e[6]=o*c+r*u-i*a,e[7]=-r*a-i*u-o*s,e}function ui(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function si(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function ci(e,t){let n=xr();wt(n,t);let r=new p(3);return _t(r,t),ai(e,n,r),e}function fi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function li(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function di(e,t,n,r,i,o,a,u,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=u,e[7]=s,e}const hi=Ir;function pi(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}const mi=Ir;function bi(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function vi(e,t){let n=t[4],r=t[5],i=t[6],o=t[7],a=-t[0],u=-t[1],s=-t[2],c=t[3];return e[0]=2*(n*c+o*a+r*s-i*u),e[1]=2*(r*c+o*u+i*a-n*s),e[2]=2*(i*c+o*s+n*u-r*a),e}function gi(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=t[4],l=t[5],d=t[6],h=t[7];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=a*u+i*c-o*s+f,e[5]=a*s+o*u-r*c+l,e[6]=a*c+r*s-i*u+d,e[7]=-r*u-i*s-o*c+h,e}function yi(e,t,n){let r=-t[0],i=-t[1],o=-t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=u*a+f*r+s*o-c*i,d=s*a+f*i+c*r-u*o,h=c*a+f*o+u*i-s*r,p=f*a-u*r-s*i-c*o;return Er(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=l*a+p*r+d*o-h*i,e[5]=d*a+p*i+h*r-l*o,e[6]=h*a+p*o+l*i-d*r,e[7]=p*a-l*r-d*i-h*o,e}function _i(e,t,n){let r=-t[0],i=-t[1],o=-t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=u*a+f*r+s*o-c*i,d=s*a+f*i+c*r-u*o,h=c*a+f*o+u*i-s*r,p=f*a-u*r-s*i-c*o;return Sr(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=l*a+p*r+d*o-h*i,e[5]=d*a+p*i+h*r-l*o,e[6]=h*a+p*o+l*i-d*r,e[7]=p*a-l*r-d*i-h*o,e}function xi(e,t,n){let r=-t[0],i=-t[1],o=-t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=u*a+f*r+s*o-c*i,d=s*a+f*i+c*r-u*o,h=c*a+f*o+u*i-s*r,p=f*a-u*r-s*i-c*o;return Cr(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=l*a+p*r+d*o-h*i,e[5]=d*a+p*i+h*r-l*o,e[6]=h*a+p*o+l*i-d*r,e[7]=p*a-l*r-d*i-h*o,e}function wi(e,t,n){let r=n[0],i=n[1],o=n[2],a=n[3],u=t[0],s=t[1],c=t[2],f=t[3];return e[0]=u*a+f*r+s*o-c*i,e[1]=s*a+f*i+c*r-u*o,e[2]=c*a+f*o+u*i-s*r,e[3]=f*a-u*r-s*i-c*o,u=t[4],s=t[5],c=t[6],f=t[7],e[4]=u*a+f*r+s*o-c*i,e[5]=s*a+f*i+c*r-u*o,e[6]=c*a+f*o+u*i-s*r,e[7]=f*a-u*r-s*i-c*o,e}function Mi(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=n[0],s=n[1],c=n[2],f=n[3];return e[0]=r*f+a*u+i*c-o*s,e[1]=i*f+a*s+o*u-r*c,e[2]=o*f+a*c+r*s-i*u,e[3]=a*f-r*u-i*s-o*c,u=n[4],s=n[5],c=n[6],f=n[7],e[4]=r*f+a*u+i*c-o*s,e[5]=i*f+a*s+o*u-r*c,e[6]=o*f+a*c+r*s-i*u,e[7]=a*f-r*u-i*s-o*c,e}function Ai(e,t,n,r){if(Math.abs(r)<h)return fi(e,t);let i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;let o=Math.sin(r),a=o*n[0]/i,u=o*n[1]/i,s=o*n[2]/i,c=Math.cos(r),f=t[0],l=t[1],d=t[2],p=t[3];e[0]=f*c+p*a+l*s-d*u,e[1]=l*c+p*u+d*a-f*s,e[2]=d*c+p*s+f*u-l*a,e[3]=p*c-f*a-l*u-d*s;let m=t[4],b=t[5],v=t[6],g=t[7];return e[4]=m*c+g*a+b*s-v*u,e[5]=b*c+g*u+v*a-m*s,e[6]=v*c+g*s+m*u-b*a,e[7]=g*c-m*a-b*u-v*s,e}function ki(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Ei(e,t,n){let r=t[0],i=t[1],o=t[2],a=t[3],u=n[4],s=n[5],c=n[6],f=n[7],l=t[4],d=t[5],h=t[6],p=t[7],m=n[0],b=n[1],v=n[2],g=n[3];return e[0]=r*g+a*m+i*v-o*b,e[1]=i*g+a*b+o*m-r*v,e[2]=o*g+a*v+r*b-i*m,e[3]=a*g-r*m-i*b-o*v,e[4]=r*f+a*u+i*c-o*s+l*g+p*m+d*v-h*b,e[5]=i*f+a*s+o*u-r*c+d*g+p*b+h*m-l*v,e[6]=o*f+a*c+r*s-i*u+h*g+p*v+l*b-d*m,e[7]=a*f-r*u-i*s-o*c+p*g-l*m-d*b-h*v,e}const Si=Ei;function Ci(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}const Ti=Ur;function Oi(e,t,n,r){let i=1-r;return Ti(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e}function Di(e,t){let n=Fi(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function ji(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}const Li=Wr,Ri=Li,Fi=Yr,Pi=Fi;function zi(e,t){let n=Fi(t);if(n>0){n=Math.sqrt(n);let r=t[0]/n,i=t[1]/n,o=t[2]/n,a=t[3]/n,u=t[4],s=t[5],c=t[6],f=t[7],l=r*u+i*s+o*c+a*f;e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=(u-r*l)/n,e[5]=(s-i*l)/n,e[6]=(c-o*l)/n,e[7]=(f-a*l)/n}return e}function Bi(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Ii(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function qi(e,t){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=t[0],l=t[1],d=t[2],p=t[3],m=t[4],b=t[5],v=t[6],g=t[7];return Math.abs(n-f)<=h*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-d)<=h*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=h*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=h*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-b)<=h*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-v)<=h*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-g)<=h*Math.max(1,Math.abs(c),Math.abs(g))}function Ni(){let e=new p(2);return p!=Float32Array&&(e[0]=0,e[1]=0),e}function Hi(e){let t=new p(2);return t[0]=e[0],t[1]=e[1],t}function Vi(e,t){let n=new p(2);return n[0]=e,n[1]=t,n}function Ui(e,t){return e[0]=t[0],e[1]=t[1],e}function Gi(e,t,n){return e[0]=t,e[1]=n,e}function Wi(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Xi(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Yi(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function Qi(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Zi(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Ki(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Ji(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function $i(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function eo(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function to(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function no(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function ro(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function io(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function oo(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function ao(e){var t=e[0],n=e[1];return t*t+n*n}function uo(e,t){return e[0]=-t[0],e[1]=-t[1],e}function so(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function co(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function fo(e,t){return e[0]*t[0]+e[1]*t[1]}function lo(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function ho(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function po(e,t){t=t||1;var n=2*m()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function mo(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function bo(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function vo(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function go(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function yo(e,t,n,r){let i=t[0]-n[0],o=t[1]-n[1],a=Math.sin(r),u=Math.cos(r);return e[0]=i*u-o*a+n[0],e[1]=i*a+o*u+n[1],e}function _o(e,t){let n=e[0],r=e[1],i=t[0],o=t[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));let u=i*i+o*o;u>0&&(u=1/Math.sqrt(u));let s=(n*i+r*o)*a*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function xo(e){return"vec2("+e[0]+", "+e[1]+")"}function wo(e,t){return e[0]===t[0]&&e[1]===t[1]}function Mo(e,t){let n=e[0],r=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=h*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))}const Ao=oo,ko=Xi,Eo=Yi,So=Qi,Co=ro,To=io,Oo=ao,Do=function(){let e=Ni();return function(t,n,r,i,o,a){let u,s;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],o(e,e,a),t[u]=e[0],t[u+1]=e[1];return t}}();n.d(t,"glMatrix",function(){return r}),n.d(t,"mat2",function(){return i}),n.d(t,"mat2d",function(){return o}),n.d(t,"mat3",function(){return a}),n.d(t,"mat4",function(){return u}),n.d(t,"quat",function(){return f}),n.d(t,"quat2",function(){return l}),n.d(t,"vec2",function(){return d}),n.d(t,"vec3",function(){return s}),n.d(t,"vec4",function(){return c})},function(e,t){e.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){var o,a,u,s,c,f,l,d,h,p,m=t[0],b=t[1],v=t[2],g=i[0],y=i[1],_=i[2],x=n[0],w=n[1],M=n[2];if(Math.abs(m-x)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(v-M)<1e-6)return r(e);l=m-x,d=b-w,h=v-M,p=1/Math.sqrt(l*l+d*d+h*h),o=y*(h*=p)-_*(d*=p),a=_*(l*=p)-g*h,u=g*d-y*l,(p=Math.sqrt(o*o+a*a+u*u))?(o*=p=1/p,a*=p,u*=p):(o=0,a=0,u=0);s=d*u-h*a,c=h*o-l*u,f=l*a-d*o,(p=Math.sqrt(s*s+c*c+f*f))?(s*=p=1/p,c*=p,f*=p):(s=0,c=0,f=0);return e[0]=o,e[1]=s,e[2]=l,e[3]=0,e[4]=a,e[5]=c,e[6]=d,e[7]=0,e[8]=u,e[9]=f,e[10]=h,e[11]=0,e[12]=-(o*m+a*b+u*v),e[13]=-(s*m+c*b+f*v),e[14]=-(l*m+d*b+h*v),e[15]=1,e}},function(e,t){e.exports=function(e,t,n,r,i,o,a){var u=1/(t-n),s=1/(r-i),c=1/(o-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*s,e[14]=(a+o)*c,e[15]=1,e}},function(e,t){e.exports=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(i+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},function(e,t){e.exports=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e}},function(e,t){e.exports=function(e,t,n,r,i,o,a){var u=1/(n-t),s=1/(i-r),c=1/(o-a);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*s,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,d=i*a,h=i*u,p=i*s,m=o*a,b=o*u,v=o*s;return e[0]=1-l-p,e[1]=f+v,e[2]=d-b,e[3]=0,e[4]=f-v,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=d+b,e[9]=h-m,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=r+r,s=i+i,c=o+o,f=r*u,l=r*s,d=r*c,h=i*s,p=i*c,m=o*c,b=a*u,v=a*s,g=a*c;return e[0]=1-(h+m),e[1]=l+g,e[2]=d-v,e[3]=0,e[4]=l-g,e[5]=1-(f+m),e[6]=p+b,e[7]=0,e[8]=d+v,e[9]=p-b,e[10]=1-(f+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},function(e,t){e.exports=function(e,t,n){var r,i,o,a=n[0],u=n[1],s=n[2],c=Math.sqrt(a*a+u*u+s*s);if(Math.abs(c)<1e-6)return null;return a*=c=1/c,u*=c,s*=c,r=Math.sin(t),i=Math.cos(t),o=1-i,e[0]=a*a*o+i,e[1]=u*a*o+s*r,e[2]=s*a*o-u*r,e[3]=0,e[4]=a*u*o-s*r,e[5]=u*u*o+i,e[6]=s*u*o+a*r,e[7]=0,e[8]=a*s*o+u*r,e[9]=u*s*o-a*r,e[10]=s*s*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],c=t[4],f=t[5],l=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i+c*r,e[1]=a*i+f*r,e[2]=u*i+l*r,e[3]=s*i+d*r,e[4]=c*i-o*r,e[5]=f*i-a*r,e[6]=l*i-u*r,e[7]=d*i-s*r,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],u=t[2],s=t[3],c=t[8],f=t[9],l=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i-c*r,e[1]=a*i-f*r,e[2]=u*i-l*r,e[3]=s*i-d*r,e[8]=o*r+c*i,e[9]=a*r+f*i,e[10]=u*r+l*i,e[11]=s*r+d*i,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=o*i+c*r,e[5]=a*i+f*r,e[6]=u*i+l*r,e[7]=s*i+d*r,e[8]=c*i-o*r,e[9]=f*i-a*r,e[10]=l*i-u*r,e[11]=d*i-s*r,e}},function(e,t){e.exports=function(e,t,n,r){var i,o,a,u,s,c,f,l,d,h,p,m,b,v,g,y,_,x,w,M,A,k,E,S,C=r[0],T=r[1],O=r[2],D=Math.sqrt(C*C+T*T+O*O);if(Math.abs(D)<1e-6)return null;C*=D=1/D,T*=D,O*=D,i=Math.sin(n),o=Math.cos(n),a=1-o,u=t[0],s=t[1],c=t[2],f=t[3],l=t[4],d=t[5],h=t[6],p=t[7],m=t[8],b=t[9],v=t[10],g=t[11],y=C*C*a+o,_=T*C*a+O*i,x=O*C*a-T*i,w=C*T*a-O*i,M=T*T*a+o,A=O*T*a+C*i,k=C*O*a+T*i,E=T*O*a-C*i,S=O*O*a+o,e[0]=u*y+l*_+m*x,e[1]=s*y+d*_+b*x,e[2]=c*y+h*_+v*x,e[3]=f*y+p*_+g*x,e[4]=u*w+l*M+m*A,e[5]=s*w+d*M+b*A,e[6]=c*w+h*M+v*A,e[7]=f*w+p*M+g*A,e[8]=u*k+l*E+m*S,e[9]=s*k+d*E+b*S,e[10]=c*k+h*E+v*S,e[11]=f*k+p*E+g*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},function(e,t){e.exports=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(e,t){e.exports=function(e,t,n){var r,i,o,a,u,s,c,f,l,d,h,p,m=n[0],b=n[1],v=n[2];t===e?(e[12]=t[0]*m+t[4]*b+t[8]*v+t[12],e[13]=t[1]*m+t[5]*b+t[9]*v+t[13],e[14]=t[2]*m+t[6]*b+t[10]*v+t[14],e[15]=t[3]*m+t[7]*b+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=u,e[5]=s,e[6]=c,e[7]=f,e[8]=l,e[9]=d,e[10]=h,e[11]=p,e[12]=r*m+u*b+l*v+t[12],e[13]=i*m+s*b+d*v+t[13],e[14]=o*m+c*b+h*v+t[14],e[15]=a*m+f*b+p*v+t[15]);return e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],v=t[14],g=t[15],y=n[0],_=n[1],x=n[2],w=n[3];return e[0]=y*r+_*u+x*l+w*m,e[1]=y*i+_*s+x*d+w*b,e[2]=y*o+_*c+x*h+w*v,e[3]=y*a+_*f+x*p+w*g,y=n[4],_=n[5],x=n[6],w=n[7],e[4]=y*r+_*u+x*l+w*m,e[5]=y*i+_*s+x*d+w*b,e[6]=y*o+_*c+x*h+w*v,e[7]=y*a+_*f+x*p+w*g,y=n[8],_=n[9],x=n[10],w=n[11],e[8]=y*r+_*u+x*l+w*m,e[9]=y*i+_*s+x*d+w*b,e[10]=y*o+_*c+x*h+w*v,e[11]=y*a+_*f+x*p+w*g,y=n[12],_=n[13],x=n[14],w=n[15],e[12]=y*r+_*u+x*l+w*m,e[13]=y*i+_*s+x*d+w*b,e[14]=y*o+_*c+x*h+w*v,e[15]=y*a+_*f+x*p+w*g,e}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15];return(t*a-n*o)*(l*b-d*m)-(t*u-r*o)*(f*b-d*p)+(t*s-i*o)*(f*m-l*p)+(n*u-r*a)*(c*b-d*h)-(n*s-i*a)*(c*m-l*h)+(r*s-i*u)*(c*p-f*h)}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],v=t[15];return e[0]=u*(d*v-h*b)-l*(s*v-c*b)+m*(s*h-c*d),e[1]=-(r*(d*v-h*b)-l*(i*v-o*b)+m*(i*h-o*d)),e[2]=r*(s*v-c*b)-u*(i*v-o*b)+m*(i*c-o*s),e[3]=-(r*(s*h-c*d)-u*(i*h-o*d)+l*(i*c-o*s)),e[4]=-(a*(d*v-h*b)-f*(s*v-c*b)+p*(s*h-c*d)),e[5]=n*(d*v-h*b)-f*(i*v-o*b)+p*(i*h-o*d),e[6]=-(n*(s*v-c*b)-a*(i*v-o*b)+p*(i*c-o*s)),e[7]=n*(s*h-c*d)-a*(i*h-o*d)+f*(i*c-o*s),e[8]=a*(l*v-h*m)-f*(u*v-c*m)+p*(u*h-c*l),e[9]=-(n*(l*v-h*m)-f*(r*v-o*m)+p*(r*h-o*l)),e[10]=n*(u*v-c*m)-a*(r*v-o*m)+p*(r*c-o*u),e[11]=-(n*(u*h-c*l)-a*(r*h-o*l)+f*(r*c-o*u)),e[12]=-(a*(l*b-d*m)-f*(u*b-s*m)+p*(u*d-s*l)),e[13]=n*(l*b-d*m)-f*(r*b-i*m)+p*(r*d-i*l),e[14]=-(n*(u*b-s*m)-a*(r*b-i*m)+p*(r*s-i*u)),e[15]=n*(u*d-s*l)-a*(r*d-i*l)+f*(r*s-i*u),e}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],v=t[15],g=n*u-r*a,y=n*s-i*a,_=n*c-o*a,x=r*s-i*u,w=r*c-o*u,M=i*c-o*s,A=f*m-l*p,k=f*b-d*p,E=f*v-h*p,S=l*b-d*m,C=l*v-h*m,T=d*v-h*b,O=g*T-y*C+_*S+x*E-w*k+M*A;if(!O)return null;return O=1/O,e[0]=(u*T-s*C+c*S)*O,e[1]=(i*C-r*T-o*S)*O,e[2]=(m*M-b*w+v*x)*O,e[3]=(d*w-l*M-h*x)*O,e[4]=(s*E-a*T-c*k)*O,e[5]=(n*T-i*E+o*k)*O,e[6]=(b*_-p*M-v*y)*O,e[7]=(f*M-d*_+h*y)*O,e[8]=(a*C-u*E+c*A)*O,e[9]=(r*E-n*C-o*A)*O,e[10]=(p*w-m*_+v*g)*O,e[11]=(l*_-f*w-h*g)*O,e[12]=(u*k-a*S-s*A)*O,e[13]=(n*S-r*k+i*A)*O,e[14]=(m*y-p*x-b*g)*O,e[15]=(f*x-l*y+d*g)*O,e}},function(e,t){e.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(e,t){e.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},function(e,t){e.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){var n,r="undefined"!=typeof window?window.navigator.userAgent:"",i=/OS X/.test(r),o=/Opera/.test(r),a=!/like Gecko/.test(r)&&!o,u=e.exports={0:i?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:i?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:i&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:o?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;n<65;++n)u[n]=String.fromCharCode(n);for(n=48;n<58;++n)u[n]=n-48+"";for(n=65;n<91;++n)u[n]=String.fromCharCode(n);for(n=96;n<106;++n)u[n]="<num-"+(n-96)+">";for(n=112;n<136;++n)u[n]="F"+(n-111)},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],f=!1,l=-1;function d(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!f){var e=u(d);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||f||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t){var r=n(36),i=Object.keys(r),o={};function a(){i.forEach(function(e){o[r[e]]=!1})}a(),e.exports=function(e){return e?o[e]:o},t.browser&&(window.addEventListener("keydown",function(e){o[r[e.keyCode]]=!0},!1),window.addEventListener("keyup",function(e){o[r[e.keyCode]]=!1},!1),window.addEventListener("blur",a,!1))}).call(this,n(37))},function(e,t,n){var r=n(1),i=["left","middle","right"];e.exports=function(e,t){var n=new r;n.left=!1,n.right=!1,n.middle=!1,"undefined"!=typeof window&&((e=e||window).addEventListener("mousedown",function(e){if(n.right=!1,n[i[e.button]]=!0,n.emit("down",e),!t)return;if(!e.preventDefault)return!1;e.preventDefault(),e.stopPropagation()},!1),e.addEventListener("mouseup",function(e){if(n.right=!1,n[i[e.button]]=!1,n.emit("up",e),!t)return;if(!e.preventDefault)return;e.preventDefault(),e.stopPropagation()},!1),t&&e.addEventListener("contextmenu",function(e){return e.preventDefault&&e.preventDefault()&&!1},!1));return n}},function(e,t,n){var r=n(1);e.exports=function(e,t){var n=new r;if(n.x=0,n.y=0,n.prevX=0,n.prevY=0,n.flush=function(){this.prevX=this.x,this.prevY=this.y},"undefined"==typeof window)return n;return t=t||e||window,e=e||document.body,t.addEventListener("mousemove",e===document.body||e===window?function(e){n.prevX=n.x,n.prevY=n.y,n.x=e.clientX,n.y=e.clientY,n.emit("move",e)}:function(t){n.prevX=n.x,n.prevY=n.y;var r=e.getBoundingClientRect();n.x=t.clientX-r.left,n.y=t.clientY-r.top,n.emit("move",t)},!1),n}},function(e,t){e.exports=function(e,t,n){o(e,r,t,n),"DOMMouseScroll"==r&&o(e,"MozMousePixelScroll",t,n)};var n,r,i="";function o(e,t,o,a){e[n](i+t,"wheel"==r?o:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==r?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,o(t)},a||!1)}window.addEventListener?n="addEventListener":(n="attachEvent",i="on"),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},function(e,t,n){var r=n(1),i=n(41);e.exports=function(e,t){var n=new r;if(n.flush=o,o(),"undefined"==typeof window)return n;return e=e||window,i(e,function(e){var r=1===e.deltaMode?12:1;n[0]+=r*(e.deltaX||0),n[1]+=r*(e.deltaY||0),n[2]+=r*(e.deltaZ||0),n.emit("scroll",n),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation&&e.stopPropagation())},!1),n;function o(){n[0]=n[1]=n[2]=0}}},function(e,t,n){"use strict";var r=n(7),i=r.vec3,o=r.mat3,a=r.mat4,u=r.quat,s=new Float32Array(16),c=new Float32Array(16);function f(e,t,n){this.rotation=e,this.center=t,this.distance=n}var l=f.prototype;function d(e,t){var n=t[0],r=t[1],i=(t[2],n*n+r*r);i>1&&(i=1),e[0]=-t[0],e[1]=t[1],e[2]=t[2]||Math.sqrt(1-i),e[3]=0}l.view=function(e){return e||(e=a.create()),c[0]=c[1]=0,c[2]=-this.distance,a.fromRotationTranslation(e,u.conjugate(s,this.rotation),c),a.translate(e,e,i.negate(s,this.center)),e},l.lookAt=function(e,t,n){a.lookAt(s,e,t,n),o.fromMat4(s,s),u.fromMat3(this.rotation,s),i.copy(this.center,t),this.distance=i.distance(e,t)},l.pan=function(e){var t=this.distance;s[0]=-t*(e[0]||0),s[1]=t*(e[1]||0),s[2]=t*(e[2]||0),i.transformQuat(s,s,this.rotation),i.add(this.center,this.center,s)},l.zoom=function(e){this.distance+=e,this.distance<0&&(this.distance=0)},l.rotate=function(e,t){d(s,e),d(c,t),u.invert(c,c),u.multiply(s,s,c),u.length(s)<1e-6||(u.multiply(this.rotation,this.rotation,s),u.normalize(this.rotation,this.rotation))},e.exports=function(e,t,n){e=e||[0,0,-1],t=t||[0,0,0],n=n||[0,1,0];var r=new f(u.create(),i.create(),1);return r.lookAt(e,t,n),r}}]);
//# sourceMappingURL=bundle.js.map